{"ast":null,"code":"import _objectSpread from\"C:/Users/PRATHAM/P/LifeSync/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{User,Hospital,LogOut,MapPin,Home,Phone,Shield,Menu,X,Ambulance,ChevronRight,Bed,Phone as PhoneIcon}from'lucide-react';import{ref,push,set,serverTimestamp}from'firebase/database';import{db}from'./firebase';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LifeSyncApp(){// 1. STATE MANAGEMENT (Persistence Simulation)\nconst[userRole,setUserRole]=useState(localStorage.getItem('role')||null);const[isUserRegistered,setIsUserRegistered]=useState(localStorage.getItem('isRegistered')==='true');const[currentPage,setCurrentPage]=useState(()=>{// If user is already registered and logged in, go to home page\nif(localStorage.getItem('role')==='user'&&localStorage.getItem('isRegistered')==='true'){return'home';}return'home';});const[isMenuOpen,setIsMenuOpen]=useState(false);const[sosStarted,setSosStarted]=useState(false);const[position,setPosition]=useState(null);const[watchId,setWatchId]=useState(null);const[notificationStatus,setNotificationStatus]=useState({});const[userData,setUserData]=useState(()=>{const stored=localStorage.getItem('userData');return stored?JSON.parse(stored):null;});const[hospitalData,setHospitalData]=useState(()=>{const stored=localStorage.getItem('hospitalLoggedIn');return stored?JSON.parse(stored):null;});// 2. LOGIN HANDLER\nconst handleLogin=role=>{localStorage.setItem('role',role);setUserRole(role);// Check if user is registered, if not go to registration\nif(role==='user'&&!isUserRegistered){setCurrentPage('register');}else if(role==='hospital'){// Show hospital login/register page\nsetCurrentPage('hospital-login');}else{setCurrentPage('home');}};const handleRegistration=data=>{localStorage.setItem('userData',JSON.stringify(data));localStorage.setItem('isRegistered','true');setUserData(data);setIsUserRegistered(true);// Auto-login user after registration\nsetUserRole('user');setCurrentPage('home');};const handleLogout=()=>{localStorage.clear();setUserRole(null);setIsUserRegistered(false);setUserData(null);setCurrentPage('login');};// SOS / Notifications\nconst emergencyContacts=()=>{// gather up to 5 contacts from stored userData or defaults\nconst contacts=[];if(userData!==null&&userData!==void 0&&userData.emergencyContact1&&userData!==null&&userData!==void 0&&userData.emergencyPhone1)contacts.push({name:userData.emergencyContact1,phone:userData.emergencyPhone1});if(userData!==null&&userData!==void 0&&userData.emergencyContact2&&userData!==null&&userData!==void 0&&userData.emergencyPhone2)contacts.push({name:userData.emergencyContact2,phone:userData.emergencyPhone2});// fill with defaults if less than 5\nwhile(contacts.length<5){contacts.push({name:\"Contact \".concat(contacts.length+1),phone:\"+91 90000 0000\".concat(contacts.length)});}return contacts.slice(0,5);};const[calculatedHospitals,setCalculatedHospitals]=useState([]);const[mapRef,setMapRef]=useState(null);const[mapLoaded,setMapLoaded]=useState(false);const[alertsSent,setAlertsSent]=useState(false);const[isSOSActive,setIsSOSActive]=useState(false);const[isEditingProfile,setIsEditingProfile]=useState(false);// Search for REAL nearby hospitals using Google Places API\nconst searchNearbyHospitals=async userPos=>{if(!userPos){console.log('No position available');return;}// Wait for Google Maps API to load\nlet attempts=0;const waitForGoogle=setInterval(()=>{attempts++;if(window.google&&window.google.maps&&window.google.maps.places){clearInterval(waitForGoogle);performSearch();}else if(attempts>20){clearInterval(waitForGoogle);console.error('Google Maps API failed to load');setCalculatedHospitals([]);}},100);const performSearch=()=>{try{console.log('Starting hospital search for:',userPos.coords.latitude,userPos.coords.longitude);const userLocation=new window.google.maps.LatLng(userPos.coords.latitude,userPos.coords.longitude);// Create a dummy div for PlacesService\nconst mapDiv=document.createElement('div');mapDiv.style.display='none';document.body.appendChild(mapDiv);const map=new window.google.maps.Map(mapDiv,{center:userLocation,zoom:15});const service=new window.google.maps.places.PlacesService(map);const request={location:userLocation,radius:5000,// 5km radius\ntype:'hospital'};console.log('Sending PlacesService request:',request);service.nearbySearch(request,(results,status)=>{console.log('=== Places API Response ===');console.log('Status:',status);console.log('Results count:',results===null||results===void 0?void 0:results.length);// Log status constants\nconsole.log('OK Status constant:',window.google.maps.places.PlacesServiceStatus.OK);console.log('Status string comparison:',status==='OK');// Try both string and constant comparison\nconst isOK=status==='OK'||status===window.google.maps.places.PlacesServiceStatus.OK;if(isOK&&results&&results.length>0){console.log('Hospitals found! Processing...');// Sort by distance and get top 3\nconst hospitalsWithDist=results.map(place=>{const distance=window.google.maps.geometry.spherical.computeDistanceBetween(userLocation,place.geometry.location)/1000;return{place,distance};});hospitalsWithDist.sort((a,b)=>a.distance-b.distance);const topHospitals=hospitalsWithDist.slice(0,3).map((_ref,idx)=>{var _place$opening_hours;let{place,distance:dist}=_ref;const estimatedTime=Math.ceil(dist/30*60);return{name:place.name||'Hospital',address:place.vicinity||'Address not available',lat:place.geometry.location.lat(),lng:place.geometry.location.lng(),dist:\"\".concat(dist.toFixed(1),\"km\"),time:\"\".concat(estimatedTime,\" mins\"),distValue:dist,rating:place.rating||'N/A',icuAvail:Math.floor(Math.random()*15)+1,ambulance:'+91 98765 1000'+idx,toll:'1800-HOSPITAL-'+idx,placeId:place.place_id,isOpenNow:(_place$opening_hours=place.opening_hours)!==null&&_place$opening_hours!==void 0&&_place$opening_hours.open_now?'Open':'Check Hours'};});setCalculatedHospitals(topHospitals);console.log('✅ Found Real Top 3 Hospitals:',topHospitals);}else{console.error('❌ Places Search failed or no results. Status:',status);// Show mock hospitals as fallback for testing\nconst mockHospitals=[{name:'City Medical Center',address:'Main Street, Downtown',lat:userPos.coords.latitude+0.01,lng:userPos.coords.longitude+0.01,dist:'1.2km',time:'5 mins',distValue:1.2,rating:'4.5',icuAvail:8,ambulance:'+91 9876510001',toll:'1800-CITY-911',isOpenNow:'Open'},{name:'St. Joseph Hospital',address:'Healthcare Avenue, North',lat:userPos.coords.latitude-0.01,lng:userPos.coords.longitude+0.01,dist:'2.4km',time:'9 mins',distValue:2.4,rating:'4.7',icuAvail:12,ambulance:'+91 9876510002',toll:'1800-JOSEPH-911',isOpenNow:'Open'},{name:'Central Health Complex',address:'Wellness Road, Metro',lat:userPos.coords.latitude+0.005,lng:userPos.coords.longitude-0.01,dist:'3.1km',time:'12 mins',distValue:3.1,rating:'4.3',icuAvail:5,ambulance:'+91 9876510003',toll:'1800-CENTRAL-911',isOpenNow:'Open'}];console.log('Using fallback mock hospitals for testing');setCalculatedHospitals(mockHospitals);}// Clean up\ndocument.body.removeChild(mapDiv);});}catch(error){console.error('Error in searchNearbyHospitals:',error);setCalculatedHospitals([]);}};};// Try to detect the Google Maps API key from the loaded script tag (if present)\nconst getGoogleApiKey=()=>{try{for(const s of Array.from(document.scripts)){if(!s.src)continue;if(s.src.includes('maps.googleapis.com')){const url=new URL(s.src);return url.searchParams.get('key')||'';}}}catch(e){console.error('Error reading Google API key from scripts',e);}return'';};// Initialize map with proper error checking\nuseEffect(()=>{if(currentPage==='map'&&position&&window.google){const mapElement=document.getElementById('map');if(!mapElement){console.error('Map element not found');return;}if(mapRef&&mapLoaded){return;// Map already initialized\n}try{const map=new window.google.maps.Map(mapElement,{zoom:15,center:{lat:position.coords.latitude,lng:position.coords.longitude},mapTypeId:'roadmap'});// User marker (Blue)\nnew window.google.maps.Marker({position:{lat:position.coords.latitude,lng:position.coords.longitude},map:map,title:'Your Location',icon:'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'});// Hospital markers (Red)\ncalculatedHospitals.forEach((hospital,idx)=>{new window.google.maps.Marker({position:{lat:hospital.lat,lng:hospital.lng},map:map,title:\"\".concat(idx+1,\". \").concat(hospital.name),label:\"\".concat(idx+1),icon:'http://maps.google.com/mapfiles/ms/icons/hospital.png'});// Add info window\nconst infowindow=new window.google.maps.InfoWindow({content:\"<div style=\\\"padding:10px\\\">\\n              <strong>\".concat(hospital.name,\"</strong><br/>\\n              \").concat(hospital.address,\"<br/>\\n              Distance: \").concat(hospital.dist,\"\\n            </div>\")});const marker=new window.google.maps.Marker({position:{lat:hospital.lat,lng:hospital.lng},map:map,title:hospital.name});marker.addListener('click',()=>{infowindow.open(map,marker);});});setMapRef(map);setMapLoaded(true);}catch(error){console.error('Map initialization error:',error);}}},[currentPage,position,calculatedHospitals,mapRef,mapLoaded]);const nearestHospitals=calculatedHospitals.length>0?calculatedHospitals:[];const notifyAll=(pos,selectedHospital)=>{if(!pos)return;// Build message with location and hospital details\nconst coords=\"\".concat(pos.coords.latitude.toFixed(6),\", \").concat(pos.coords.longitude.toFixed(6));const apiKey=getGoogleApiKey();const mapsLink=apiKey?\"https://www.google.com/maps/search/?api=1&query=\".concat(pos.coords.latitude,\",\").concat(pos.coords.longitude,\"&key=\").concat(apiKey):\"https://www.google.com/maps?q=\".concat(pos.coords.latitude,\",\").concat(pos.coords.longitude);const hospitalMapsLink=selectedHospital&&apiKey?\"https://www.google.com/maps/search/?api=1&query=\".concat(selectedHospital.lat,\",\").concat(selectedHospital.lng,\"&key=\").concat(apiKey):selectedHospital?\"https://www.google.com/maps?q=\".concat(selectedHospital.lat,\",\").concat(selectedHospital.lng):'';const timestamp=new Date().toLocaleTimeString();const contacts=emergencyContacts();const status={};// Send SMS to emergency contacts\ncontacts.forEach((c,i)=>{const msg=\"\\uD83D\\uDEA8 EMERGENCY ALERT!\\nName: \".concat((userData===null||userData===void 0?void 0:userData.name)||'Unknown',\"\\nAge: \").concat((userData===null||userData===void 0?void 0:userData.age)||'N/A',\"\\nBlood: \").concat((userData===null||userData===void 0?void 0:userData.bloodGroup)||'N/A',\"\\nLocation: \").concat(coords,\"\\nHospital: \").concat(selectedHospital.name,\"\\nHospital Location: \").concat(selectedHospital.lat.toFixed(6),\",\").concat(selectedHospital.lng.toFixed(6),\"\\nTime: \").concat(timestamp,\"\\nMap: \").concat(mapsLink,\"\\nHospital Map: \").concat(hospitalMapsLink);status[\"contact_\".concat(i)]={to:c.phone,name:c.name,status:'SMS Sent',message:msg,timestamp:timestamp,location:coords};console.log(\"SMS to \".concat(c.name,\" (\").concat(c.phone,\"):\"),msg);});// Notify the selected hospital\nconst msg=\"\\uD83D\\uDEA8 INCOMING EMERGENCY!\\nPatient: \".concat((userData===null||userData===void 0?void 0:userData.name)||'Unknown',\"\\nAge: \").concat((userData===null||userData===void 0?void 0:userData.age)||'N/A',\"\\nBlood: \").concat((userData===null||userData===void 0?void 0:userData.bloodGroup)||'N/A',\"\\nLocation: \").concat(coords,\"\\nPatient Map: \").concat(mapsLink,\"\\nHospital: \").concat(selectedHospital.name,\"\\nHospital Location: \").concat(selectedHospital.lat.toFixed(6),\",\").concat(selectedHospital.lng.toFixed(6),\"\\nHospital Map: \").concat(hospitalMapsLink,\"\\nTime: \").concat(timestamp);status[\"hospital\"]={to:selectedHospital.ambulance,name:selectedHospital.name,status:'Alert Sent',message:msg,timestamp:timestamp,location:coords,hospital:selectedHospital.name};console.log(\"Alert to \".concat(selectedHospital.name,\" (\").concat(selectedHospital.ambulance,\"):\"),msg);setNotificationStatus(status);// Persist hospital alert for hospital dashboard tracing\ntry{const inbound=JSON.parse(localStorage.getItem('inboundAlerts')||'[]');inbound.unshift({patient:(userData===null||userData===void 0?void 0:userData.name)||'Unknown',phone:(userData===null||userData===void 0?void 0:userData.phone)||'',coords,mapsLink,hospital:selectedHospital.name,hospitalCoords:\"\".concat(selectedHospital.lat,\",\").concat(selectedHospital.lng),hospitalPhone:selectedHospital.ambulance,timestamp});// keep last 50\nlocalStorage.setItem('inboundAlerts',JSON.stringify(inbound.slice(0,50)));}catch(e){console.error('Error persisting inbound alert',e);}};// Call ambulance for specific hospital\nconst callAmbulance=hospital=>{if(!position){alert('Location not available. Please enable GPS.');return;}// Prevent accidental duplicate sends\nif(alertsSent){const resend=window.confirm('Alerts were already sent. Do you want to resend and call again?');if(!resend)return;}// Send SMS and alerts\nnotifyAll(position,hospital);setAlertsSent(true);// Show confirmation\nalert(\"\\u2705 Emergency alert sent to:\\n\".concat(hospital.name,\"\\nYour emergency contacts\\n\\nAmbulance: \").concat(hospital.ambulance));// Auto-call ambulance\nwindow.location.href=\"tel:\".concat(hospital.ambulance);};// Confirm before sending alerts and calling ambulance\nconst confirmAndCall=hospital=>{const ok=window.confirm(\"Send your live location to emergency contacts and call ambulance at \".concat(hospital.name,\"?\"));if(!ok)return;callAmbulance(hospital);};// Firebase Emergency Report Function\nconst reportEmergency=coords=>{try{// Reference the 'emergencies' collection\nconst alertsRef=ref(db,'emergencies');// Create a new unique entry\nconst newAlertRef=push(alertsRef);// Populate the entry with patient and GPS data\nset(newAlertRef,{userName:(userData===null||userData===void 0?void 0:userData.name)||'Unknown Patient',bloodType:(userData===null||userData===void 0?void 0:userData.bloodGroup)||'N/A',age:(userData===null||userData===void 0?void 0:userData.age)||'N/A',phone:(userData===null||userData===void 0?void 0:userData.phone)||'N/A',coordinates:{lat:coords.lat,lng:coords.lng},emergencyContacts:emergencyContacts().slice(0,2),status:'pending',createdAt:serverTimestamp()}).then(()=>{console.log('✅ Emergency reported to Firebase successfully!');setIsSOSActive(true);}).catch(error=>{console.error('❌ Firebase sync failed:',error);setIsSOSActive(false);});}catch(error){console.error('Error in reportEmergency:',error);setIsSOSActive(false);}};const triggerSOS=()=>{setIsSOSActive(true);if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{const currentCoords={lat:position.coords.latitude,lng:position.coords.longitude};setPosition(position);// THE TRIGGER: Send to Firebase\nreportEmergency(currentCoords);},error=>{console.error(\"Geolocation failed:\",error);setIsSOSActive(false);},{enableHighAccuracy:true});}};const startSOS=async()=>{if(!('geolocation'in navigator)){alert('Geolocation not supported in this browser');return;}setSosStarted(true);setNotificationStatus({});// Clear previous notifications\nsetAlertsSent(false);// Request high accuracy position first\nnavigator.geolocation.getCurrentPosition(pos=>{setPosition(pos);// Search for REAL nearby hospitals using Google Places API\nsearchNearbyHospitals(pos);console.log('SOS Activated - Searching nearby hospitals...');},err=>{console.error('Geolocation error:',err.message);alert('Unable to get location. Please enable location services.');setSosStarted(false);},{enableHighAccuracy:true,maximumAge:0,timeout:10000});// Start watching for continuous location updates\nconst id=navigator.geolocation.watchPosition(pos=>{setPosition(pos);},err=>{console.error('Watch error:',err.message);},{enableHighAccuracy:true,maximumAge:5000,timeout:10000});setWatchId(id);};const stopSOS=()=>{if(watchId!==null&&navigator.geolocation.clearWatch){navigator.geolocation.clearWatch(watchId);}setWatchId(null);setSosStarted(false);setNotificationStatus({});setAlertsSent(false);};// 3. UI COMPONENTS\n// --- REGISTRATION SCREEN ---\nif(userRole==='user'&&!isUserRegistered&&currentPage==='register'){return/*#__PURE__*/_jsx(RegistrationForm,{onSubmit:handleRegistration,onBack:()=>{setUserRole(null);localStorage.clear();}});}// Hospital Registration Page\nif(currentPage==='hospital-register'){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 to-slate-50 p-6 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-lg w-full bg-white p-6 rounded-3xl shadow-xl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-black mb-4\",children:\"Register Hospital\"}),/*#__PURE__*/_jsx(HospitalRegistrationForm,{onSubmit:h=>{localStorage.setItem('hospitalData',JSON.stringify(h));setHospitalData(h);setCurrentPage('hospital-dashboard');},onCancel:()=>setCurrentPage('hospital-login')})]})});}// Hospital Login Page\nif(currentPage==='hospital-login'){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 to-slate-50 p-6 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full bg-white p-6 rounded-3xl shadow-xl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-black mb-4\",children:\"Hospital Login\"}),/*#__PURE__*/_jsx(HospitalLoginForm,{onLogin:h=>{setUserRole('hospital');setCurrentPage('hospital-dashboard');setHospitalData(h);localStorage.setItem('hospitalLoggedIn',JSON.stringify(h));},onRegister:()=>setCurrentPage('hospital-register')})]})});}// --- LOGIN SCREEN ---\nif(!userRole){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-red-50 to-slate-50 flex flex-col items-center justify-center p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white rounded-3xl shadow-xl p-8 border border-slate-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-red-100 rounded-full\",children:/*#__PURE__*/_jsx(Shield,{className:\"text-red-600 w-10 h-10\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-black text-center text-slate-800 mb-2\",children:\"LifeSync\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-slate-500 mb-8\",children:\"Emergency Medical Assistance\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleLogin('user'),className:\"w-full flex items-center justify-between p-5 bg-gradient-to-r from-red-50 to-red-100 hover:from-red-100 hover:to-red-150 border-2 border-red-200 rounded-2xl transition-all group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(User,{className:\"text-red-600 w-6 h-6\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-slate-700\",children:\"Citizen Portal\"})]}),/*#__PURE__*/_jsx(ChevronRight,{className:\"text-red-600 w-5 h-5\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleLogin('hospital'),className:\"w-full flex items-center justify-between p-5 bg-gradient-to-r from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-150 border-2 border-blue-200 rounded-2xl transition-all group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(Hospital,{className:\"text-blue-600 w-6 h-6\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-slate-700\",children:\"Hospital Staff\"})]}),/*#__PURE__*/_jsx(ChevronRight,{className:\"text-blue-600 w-5 h-5\"})]})]})]})});}// --- CITIZEN PORTAL ---\nif(userRole==='user'){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-white text-slate-900 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(AnimatePresence,{children:isMenuOpen&&/*#__PURE__*/_jsxs(motion.div,{initial:{x:'-100%'},animate:{x:0},exit:{x:'-100%'},className:\"fixed inset-0 z-50 bg-white w-3/4 shadow-2xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-10\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-black text-red-600 text-xl\",children:\"LifeSync\"}),/*#__PURE__*/_jsx(X,{onClick:()=>setIsMenuOpen(false)})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setCurrentPage('home');setIsMenuOpen(false);},className:\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\",children:[/*#__PURE__*/_jsx(Home,{className:\"w-4 h-4\"}),\" Home\"]}),/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setCurrentPage('profile');setIsMenuOpen(false);},className:\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\",children:[/*#__PURE__*/_jsx(User,{}),\" Profile\"]}),/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setCurrentPage('nearest');setIsMenuOpen(false);},className:\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\",children:[/*#__PURE__*/_jsx(Hospital,{}),\" Nearest Hospitals\"]}),/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setCurrentPage('profile');setIsEditingProfile(true);setIsMenuOpen(false);},className:\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\",children:[/*#__PURE__*/_jsx(User,{}),\" Edit Profile\"]}),/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setCurrentPage('profile');setIsEditingProfile(true);setIsMenuOpen(false);},className:\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\",children:[/*#__PURE__*/_jsx(Phone,{}),\" Emergency Contacts\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-bold text-slate-400 uppercase mb-4\",children:\"Emergency Services\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{window.location.href='tel:112';setIsMenuOpen(false);},className:\"w-full flex items-center gap-4 p-3 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition mb-3\",children:[/*#__PURE__*/_jsx(Phone,{className:\"w-5 h-5\"}),\" Call 112\"]})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:handleLogout,className:\"flex items-center gap-4 text-lg font-bold text-red-600 cursor-pointer hover:text-red-700 transition\",children:[/*#__PURE__*/_jsx(LogOut,{}),\" Log Out\"]})]})]})}),/*#__PURE__*/_jsxs(\"header\",{className:\"p-6 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(Menu,{onClick:()=>setIsMenuOpen(true),className:\"w-8 h-8 cursor-pointer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-2 w-2 rounded-full bg-green-500 animate-pulse\"})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"p-6\",children:[currentPage==='home'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-black mb-2\",children:\"Ready for Assistance\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 mb-6\",children:\"Press the SOS button to alert contacts and nearby hospitals\"}),/*#__PURE__*/_jsxs(motion.button,{whileTap:{scale:0.95},animate:sosStarted?{scale:[1,1.06,1]}:{},transition:{repeat:sosStarted?Infinity:0,duration:1},onClick:()=>sosStarted?stopSOS():startSOS(),className:\"w-72 h-72 rounded-full flex flex-col items-center justify-center text-white text-5xl font-black shadow-2xl transition-colors \".concat(sosStarted?'bg-orange-500':'bg-red-600 shadow-red-200'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-3xl\",children:sosStarted?'ACTIVE':'SOS'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium mt-2\",children:sosStarted?'Sending location...':'Tap to alert'})]}),sosStarted&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 w-full max-w-3xl\",children:[nearestHospitals.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center gap-4 mb-4\",children:nearestHospitals.map((h,idx)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>confirmAndCall(h),className:\"flex flex-col items-center justify-center bg-red-600 hover:bg-red-700 text-white rounded-full w-20 h-20 shadow-lg\",title:\"Send location & call \".concat(h.name),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold text-center px-1\",children:\"#\".concat(idx+1)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] mt-1 text-center px-1\",children:h.dist})]},\"quick-\".concat(idx)))}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-4 rounded-2xl shadow mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center flex-wrap gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"Live Location (GPS Precise)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-sm\",children:position?\"\".concat(position.coords.latitude.toFixed(6),\", \").concat(position.coords.longitude.toFixed(6)):'Acquiring...'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-slate-400\",children:[\"Accuracy: \",position?\"\\xB1\".concat(position.coords.accuracy.toFixed(0),\"m\"):'N/A']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right flex gap-2\",children:[position&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage('map'),className:\"text-sm text-blue-600 font-semibold bg-blue-50 px-3 py-1 rounded-lg hover:bg-blue-100\",children:\"\\uD83D\\uDCCD View Map\"}),position&&/*#__PURE__*/_jsx(\"a\",{className:\"text-sm text-blue-600 font-semibold bg-blue-50 px-3 py-1 rounded-lg hover:bg-blue-100\",href:\"https://www.google.com/maps?q=\".concat(position.coords.latitude,\",\").concat(position.coords.longitude),target:\"_blank\",rel:\"noreferrer\",children:\"\\uD83D\\uDDFA\\uFE0F GMaps\"}),/*#__PURE__*/_jsx(\"button\",{onClick:stopSOS,className:\"text-sm text-white font-bold bg-red-600 px-3 py-1 rounded-lg hover:bg-red-700\",children:\"Stop\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:nearestHospitals.map((h,i)=>{var _notificationStatus$h;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-white rounded-2xl shadow flex flex-col md:flex-row md:justify-between md:items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-slate-900\",children:h.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:h.address}),h.lat&&h.lng&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-slate-400\",children:[\"Coords: \",h.lat.toFixed(6),\", \",h.lng.toFixed(6)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-green-600 font-semibold mt-1\",children:[\"\\uD83D\\uDCCD \",h.dist,\" \\u2022 \",h.time,\" away\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-green-50 p-2 rounded-lg\",children:[/*#__PURE__*/_jsx(Bed,{className:\"w-4 h-4 text-green-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"ICU Beds\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-green-600\",children:h.icuAvail})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-blue-50 p-2 rounded-lg\",children:[/*#__PURE__*/_jsx(Ambulance,{className:\"w-4 h-4 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"Ambulance\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-blue-600 text-sm\",children:h.ambulance})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 md:mt-0 md:text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-slate-600 mb-2\",children:[\"Status: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-green-600\",children:((_notificationStatus$h=notificationStatus.hospital)===null||_notificationStatus$h===void 0?void 0:_notificationStatus$h.status)||'Ready'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>confirmAndCall(h),className:\"bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-xl font-bold transition-colors\",children:\"\\uD83D\\uDE91 Call Ambulance\"})]})]},i);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 bg-white p-3 rounded-2xl shadow\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-bold mb-2\",children:\"Notifications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-2\",children:[Object.keys(notificationStatus).length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-slate-500\",children:\"Notifications will appear here once dispatched.\"}),Object.entries(notificationStatus).map(_ref2=>{let[k,v]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-slate-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-500\",children:v.name}),/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-sm\",children:v.to}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-600\",children:v.status})]},k);})]})]})]})]}),currentPage==='profile'&&/*#__PURE__*/_jsxs(\"div\",{className:\"animate-in slide-in-from-bottom duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-3\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCurrentPage('home');setIsEditingProfile(false);},className:\"text-slate-400 font-bold py-2 px-4 bg-slate-100 hover:bg-slate-200 rounded-lg transition\",children:\"\\u2190 Back\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-3\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setIsEditingProfile(prev=>!prev);},className:\"text-white font-bold py-2 px-4 bg-red-600 hover:bg-red-700 rounded-lg transition\",children:isEditingProfile?'Cancel Edit':'Edit Profile'})})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-black mb-6\",children:\"Your Profile\"}),isEditingProfile?/*#__PURE__*/_jsx(EditProfileForm,{initialData:userData,onSave:updated=>{localStorage.setItem('userData',JSON.stringify(updated));setUserData(updated);setIsEditingProfile(false);alert('Profile updated');}}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-50 p-6 rounded-3xl space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl flex items-center gap-4\",children:[userData!==null&&userData!==void 0&&userData.profilePic?/*#__PURE__*/_jsx(\"img\",{src:userData.profilePic,alt:\"profile\",className:\"w-20 h-20 rounded-full object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 rounded-full bg-slate-200 flex items-center justify-center\",children:\"No Img\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"Name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-lg\",children:(userData===null||userData===void 0?void 0:userData.name)||'Not set'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"Age\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:(userData===null||userData===void 0?void 0:userData.age)||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"Blood Group\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-red-600 text-lg\",children:(userData===null||userData===void 0?void 0:userData.bloodGroup)||'N/A'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:(userData===null||userData===void 0?void 0:userData.phone)||'Not set'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:(userData===null||userData===void 0?void 0:userData.email)||'Not set'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"More Information\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-600\",children:(userData===null||userData===void 0?void 0:userData.moreInfo)||'No additional info'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"Emergency Contacts\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mt-3\",children:[(userData===null||userData===void 0?void 0:userData.emergencyContact1)&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium bg-white p-3 rounded-lg border border-slate-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:userData.emergencyContact1}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-600\",children:userData.emergencyPhone1})]}),(userData===null||userData===void 0?void 0:userData.emergencyContact2)&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium bg-white p-3 rounded-lg border border-slate-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:userData.emergencyContact2}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-600\",children:userData.emergencyPhone2})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{handleLogout();},className:\"w-full mt-6 bg-red-100 hover:bg-red-200 text-red-600 font-bold py-3 rounded-xl transition-colors\",children:\"Logout\"})]})]}),currentPage==='nearest'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage('home'),className:\"text-slate-400 font-bold\",children:\"\\u2190 Back\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-black\",children:\"Nearby Hospitals\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(!position){navigator.geolocation.getCurrentPosition(pos=>{setPosition(pos);searchNearbyHospitals(pos);},()=>alert('Please enable location'),{enableHighAccuracy:true,maximumAge:0,timeout:10000});}else{searchNearbyHospitals(position);}},className:\"text-sm text-white font-bold bg-blue-600 px-3 py-1 rounded-lg hover:bg-blue-700\",children:\"\\uD83D\\uDD04 Refresh\"})]}),position&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-4 rounded-2xl shadow mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center flex-wrap gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"Your Current Location (GPS Precise)\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-bold text-sm\",children:[position.coords.latitude.toFixed(6),\", \",position.coords.longitude.toFixed(6)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-slate-400\",children:[\"Accuracy: \\xB1\",position.coords.accuracy.toFixed(0),\"m\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right flex gap-2\",children:position&&/*#__PURE__*/_jsx(\"a\",{className:\"text-sm text-blue-600 font-semibold bg-blue-50 px-3 py-1 rounded-lg hover:bg-blue-100\",href:\"https://www.google.com/maps?q=\".concat(position.coords.latitude,\",\").concat(position.coords.longitude),target:\"_blank\",rel:\"noreferrer\",children:\"\\uD83D\\uDDFA\\uFE0F View on GMaps\"})})]})}),!position&&/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 mb-4 text-center py-4 bg-slate-50 rounded-xl\",children:\"\\uD83D\\uDCCD Click Refresh button to enable location and find nearby hospitals\"}),calculatedHospitals.length===0&&position&&/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 mb-4 text-center py-4 bg-slate-50 rounded-xl\",children:\"Searching for hospitals...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:(calculatedHospitals.length>0?calculatedHospitals:[]).map((h,i)=>/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*0.1},className:\"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm hover:shadow-md transition-all\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-bold text-slate-900 text-lg\",children:[\"#\",i+1,\" \",h.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-500 flex items-center gap-1 mt-1\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4\"}),\" \",h.address]}),h.lat&&h.lng&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-slate-400 mt-1\",children:[\"\\uD83D\\uDCCD Coords: \",h.lat.toFixed(6),\", \",h.lng.toFixed(6)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600 font-black text-lg\",children:h.time}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-400\",children:h.dist})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3 pt-3 border-t\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-green-50 p-2 rounded-lg\",children:[/*#__PURE__*/_jsx(Bed,{className:\"w-4 h-4 text-green-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"ICU Beds\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-green-600\",children:h.icuAvail})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-blue-50 p-2 rounded-lg\",children:[/*#__PURE__*/_jsx(Ambulance,{className:\"w-4 h-4 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"Ambulance\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-blue-600 text-sm\",children:h.ambulance})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 pt-3 border-t space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-slate-700\",children:[/*#__PURE__*/_jsx(PhoneIcon,{className:\"w-4 h-4 text-orange-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold\",children:h.ambulance})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-slate-700\",children:[/*#__PURE__*/_jsx(Phone,{className:\"w-4 h-4 text-purple-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold\",children:h.toll})]}),h.rating&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2 text-slate-700\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm\",children:[\"\\u2B50 Rating: \",h.rating]})}),h.isOpenNow&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2 text-green-600\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-semibold\",children:[\"\\u2705 \",h.isOpenNow]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-3\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://www.google.com/maps?q=\".concat(h.lat,\",\").concat(h.lng),target:\"_blank\",rel:\"noreferrer\",className:\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-xl font-bold text-sm transition-colors\",children:\"\\uD83D\\uDCCD View Hospital Map\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>confirmAndCall(h),className:\"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-xl font-bold text-sm transition-colors\",children:\"\\uD83D\\uDE91 Call Ambulance\"})]})]},i))})]})]})]});}// --- MAP PAGE ---\nif(userRole==='user'&&currentPage==='map'){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 bg-red-600 text-white\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold\",children:\"Live Location & Hospitals\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage('home'),className:\"text-white hover:text-gray-200\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"map\",style:{width:'100%',height:'calc(100vh - 60px)'}})]});}// --- HOSPITAL STAFF VIEW ---\nif(userRole==='hospital'){return/*#__PURE__*/_jsx(HospitalDashboard,{});}}// --- REGISTRATION FORM COMPONENT ---\nfunction RegistrationForm(_ref3){let{onSubmit,onBack}=_ref3;const[formData,setFormData]=useState({name:'',age:'',bloodGroup:'',phone:'',email:'',emergencyContact1:'',emergencyPhone1:'',emergencyContact2:'',emergencyPhone2:'',profilePic:''});const[step,setStep]=useState(1);const handleChange=e=>{const{name,value}=e.target;// For phone fields, only allow digits (0-9)\nif(name==='phone'||name==='emergencyPhone1'||name==='emergencyPhone2'){const onlyDigits=value.replace(/\\D/g,'');setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:onlyDigits}));}else{setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));}};const handleFile=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!file)return;const reader=new FileReader();reader.onload=()=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{profilePic:reader.result}));};reader.readAsDataURL(file);};const handleSubmit=()=>{if(!formData.name||!formData.age||!formData.bloodGroup||!formData.phone){alert('Please fill all required fields');return;}if(!formData.emergencyContact1||!formData.emergencyPhone1){alert('Please enter at least one emergency contact with phone number');return;}// Check if Contact 1 name and phone are the same\nif(formData.emergencyContact1===formData.emergencyPhone1){alert('Emergency contact name and phone number cannot be the same');return;}// Check if Contact 2 is filled and validate it's different from Contact 1\nif(formData.emergencyContact2||formData.emergencyPhone2){if(formData.emergencyContact1===formData.emergencyContact2){alert('Emergency contact names must be different');return;}if(formData.emergencyPhone1===formData.emergencyPhone2){alert('Emergency contact phone numbers must be different');return;}// Check if Contact 2 name and phone are the same\nif(formData.emergencyContact2===formData.emergencyPhone2){alert('Emergency contact name and phone number cannot be the same');return;}}onSubmit(formData);};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-red-50 to-slate-50 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto mt-10\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onBack,className:\"mb-6 text-slate-600 font-bold flex items-center gap-2\",children:\"\\u2190 Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-3xl shadow-xl p-8 border border-slate-100\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-black text-slate-800 mb-2\",children:\"Register Urself\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 mb-6\",children:\"Complete your profile for emergency assistance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 mb-8\",children:[1,2].map(s=>/*#__PURE__*/_jsx(\"div\",{className:\"h-1 flex-1 rounded-full transition-all \".concat(s<=step?'bg-red-600':'bg-slate-200')},s))}),step===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Full Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Your full name\",value:formData.name,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Profile Picture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mt-2\",children:[formData.profilePic?/*#__PURE__*/_jsx(\"img\",{src:formData.profilePic,alt:\"profile\",className:\"w-16 h-16 rounded-full object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 rounded-full bg-slate-200 flex items-center justify-center\",children:\"No Img\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFile})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Age *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"age\",placeholder:\"Age\",value:formData.age,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Blood Group *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"bloodGroup\",value:formData.bloodGroup,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{children:\"O+\"}),/*#__PURE__*/_jsx(\"option\",{children:\"O-\"}),/*#__PURE__*/_jsx(\"option\",{children:\"A+\"}),/*#__PURE__*/_jsx(\"option\",{children:\"A-\"}),/*#__PURE__*/_jsx(\"option\",{children:\"B+\"}),/*#__PURE__*/_jsx(\"option\",{children:\"B-\"}),/*#__PURE__*/_jsx(\"option\",{children:\"AB+\"}),/*#__PURE__*/_jsx(\"option\",{children:\"AB-\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Phone *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-1 border border-slate-200 rounded-xl focus-within:border-red-600 bg-white\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-3 font-bold text-slate-600\",children:\"+91\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",placeholder:\"XXXXX XXXXX\",value:formData.phone,onChange:handleChange,maxLength:\"10\",className:\"flex-1 p-3 border-none outline-none\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"your@email.com\",value:formData.email,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(!formData.name||!formData.age||!formData.bloodGroup||!formData.phone){alert('Please fill all required fields: Name, Age, Blood Group, and Phone');return;}if(formData.phone.length<10){alert('Phone number must be 10 digits');return;}setStep(2);},className:\"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl mt-6\",children:\"Next\"})]}),step===2&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-slate-800 mb-4\",children:\"Emergency Contacts\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Contact 1 Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"emergencyContact1\",placeholder:\"Contact name\",value:formData.emergencyContact1,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Contact 1 Phone *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-1 border border-slate-200 rounded-xl focus-within:border-red-600 bg-white\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-3 font-bold text-slate-600\",children:\"+91\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"emergencyPhone1\",placeholder:\"XXXXX XXXXX\",value:formData.emergencyPhone1,onChange:handleChange,maxLength:\"10\",className:\"flex-1 p-3 border-none outline-none\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Contact 2 Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"emergencyContact2\",placeholder:\"Contact name\",value:formData.emergencyContact2,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Contact 2 Phone\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-1 border border-slate-200 rounded-xl focus-within:border-red-600 bg-white\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-3 font-bold text-slate-600\",children:\"+91\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"emergencyPhone2\",placeholder:\"XXXXX XXXXX\",value:formData.emergencyPhone2,onChange:handleChange,maxLength:\"10\",className:\"flex-1 p-3 border-none outline-none\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStep(1),className:\"flex-1 bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-3 rounded-xl\",children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl\",children:\"Complete\"})]})]})]})]})});}// --- HOSPITAL REGISTRATION FORM ---\nfunction HospitalRegistrationForm(_ref4){let{onSubmit,onCancel}=_ref4;const[data,setData]=useState({hospitalId:'',hospitalName:'',contact:'',email:'',password:'',specialties:''});const handleChange=e=>{const{name,value}=e.target;// For contact, only allow digits (0-9)\nif(name==='contact'){const onlyDigits=value.replace(/\\D/g,'');setData(_objectSpread(_objectSpread({},data),{},{[name]:onlyDigits}));}else{setData(_objectSpread(_objectSpread({},data),{},{[name]:value}));}};const handleSubmit=()=>{if(!data.hospitalId||!data.hospitalName||!data.email||!data.password){alert('Please fill Hospital ID, hospital name, email and password');return;}onSubmit(data);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"hospitalId\",value:data.hospitalId,onChange:handleChange,placeholder:\"Hospital ID\",className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"input\",{name:\"hospitalName\",value:data.hospitalName,onChange:handleChange,placeholder:\"Hospital Name\",className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"input\",{name:\"contact\",value:data.contact,onChange:handleChange,placeholder:\"Hospital Contact Number\",maxLength:\"10\",className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:data.email,onChange:handleChange,placeholder:\"Hospital Email\",className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",value:data.password,onChange:handleChange,placeholder:\"Password\",className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"input\",{name:\"specialties\",value:data.specialties,onChange:handleChange,placeholder:\"Specialties (comma separated)\",className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"flex-1 bg-blue-600 text-white py-2 rounded-lg\",children:\"Register\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"flex-1 bg-slate-200 py-2 rounded-lg\",children:\"Cancel\"})]})]})});}// --- HOSPITAL LOGIN FORM ---\nfunction HospitalLoginForm(_ref5){let{onLogin,onRegister}=_ref5;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const handleSubmit=()=>{const stored=JSON.parse(localStorage.getItem('hospitalData')||'null');if(!stored){alert('No hospital registered. Please register first.');return;}if(email===stored.email&&password===stored.password){onLogin(stored);}else{alert('Invalid credentials');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Hospital ID\",className:\"w-full p-3 border rounded-lg mb-2\"}),/*#__PURE__*/_jsx(\"input\",{value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Password\",type:\"password\",className:\"w-full p-3 border rounded-lg mb-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"flex-1 bg-blue-600 text-white py-2 rounded-lg\",children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onRegister,className:\"flex-1 bg-slate-200 py-2 rounded-lg\",children:\"Register\"})]})]});}// --- HOSPITAL DASHBOARD ---\nfunction HospitalDashboard(){const[hospital,setHospital]=useState(()=>{return JSON.parse(localStorage.getItem('hospitalLoggedIn')||'null');});const[alerts,setAlerts]=useState(()=>{return JSON.parse(localStorage.getItem('inboundAlerts')||'[]');});const[patientTrackerColumns,setPatientTrackerColumns]=useState(()=>{const stored=localStorage.getItem('patientTrackerColumns');return stored?JSON.parse(stored):[{id:1,name:'Patient Name'},{id:2,name:'Status'}];});const[specialties,setSpecialties]=useState(()=>{const stored=localStorage.getItem('hospitalSpecialties');return stored?JSON.parse(stored):[{id:1,specialty:'',doctors:''}];});const[selected,setSelected]=useState(null);const[isMenuOpen,setIsMenuOpen]=useState(false);const[isEditMode,setIsEditMode]=useState(false);const[editData,setEditData]=useState({hospitalId:(hospital===null||hospital===void 0?void 0:hospital.hospitalId)||'',hospitalName:(hospital===null||hospital===void 0?void 0:hospital.hospitalName)||'',contact:(hospital===null||hospital===void 0?void 0:hospital.contact)||'',email:(hospital===null||hospital===void 0?void 0:hospital.email)||'',specialties:(hospital===null||hospital===void 0?void 0:hospital.specialties)||''});const handleLogout=()=>{localStorage.clear();window.location.href='/';};const handleEdit=()=>{setIsEditMode(true);setIsMenuOpen(false);};const handleUpdate=()=>{if(!editData.hospitalId||!editData.hospitalName||!editData.email){alert('Please fill Hospital ID, Hospital Name and Email');return;}const updatedHospital=_objectSpread(_objectSpread({},hospital),editData);localStorage.setItem('hospitalLoggedIn',JSON.stringify(updatedHospital));localStorage.setItem('hospitalData',JSON.stringify(updatedHospital));setHospital(updatedHospital);setIsEditMode(false);alert('Hospital details updated successfully!');};const handleEditChange=e=>{const{name,value}=e.target;// For contact, only allow digits (0-9)\nif(name==='contact'){const onlyDigits=value.replace(/\\D/g,'');setEditData(_objectSpread(_objectSpread({},editData),{},{[name]:onlyDigits}));}else{setEditData(_objectSpread(_objectSpread({},editData),{},{[name]:value}));}};// Patient Tracker Column Functions\nconst addTrackerColumn=()=>{const newColumn={id:Date.now(),name:\"Column \".concat(patientTrackerColumns.length+1)};const updated=[...patientTrackerColumns,newColumn];setPatientTrackerColumns(updated);localStorage.setItem('patientTrackerColumns',JSON.stringify(updated));};const updateTrackerColumn=(id,newName)=>{const updated=patientTrackerColumns.map(col=>col.id===id?_objectSpread(_objectSpread({},col),{},{name:newName}):col);setPatientTrackerColumns(updated);localStorage.setItem('patientTrackerColumns',JSON.stringify(updated));};const removeTrackerColumn=id=>{if(patientTrackerColumns.length===1){alert('At least one column is required');return;}const updated=patientTrackerColumns.filter(col=>col.id!==id);setPatientTrackerColumns(updated);localStorage.setItem('patientTrackerColumns',JSON.stringify(updated));};// Specialties Functions\nconst addSpecialty=()=>{const newSpec={id:Date.now(),specialty:'',doctors:''};const updated=[...specialties,newSpec];setSpecialties(updated);localStorage.setItem('hospitalSpecialties',JSON.stringify(updated));};const updateSpecialty=(id,field,value)=>{const updated=specialties.map(spec=>spec.id===id?_objectSpread(_objectSpread({},spec),{},{[field]:value}):spec);setSpecialties(updated);localStorage.setItem('hospitalSpecialties',JSON.stringify(updated));};const removeSpecialty=id=>{if(specialties.length===1){alert('At least one specialty is required');return;}const updated=specialties.filter(spec=>spec.id!==id);setSpecialties(updated);localStorage.setItem('hospitalSpecialties',JSON.stringify(updated));};useEffect(()=>{const iv=setInterval(()=>{setAlerts(JSON.parse(localStorage.getItem('inboundAlerts')||'[]'));},2000);return()=>clearInterval(iv);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-white text-slate-900 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(AnimatePresence,{children:isMenuOpen&&/*#__PURE__*/_jsxs(motion.div,{initial:{x:'-100%'},animate:{x:0},exit:{x:'-100%'},className:\"fixed inset-0 z-50 bg-white w-3/4 shadow-2xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-10\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-black text-blue-600 text-xl\",children:\"Hospital Menu\"}),/*#__PURE__*/_jsx(X,{onClick:()=>setIsMenuOpen(false),className:\"cursor-pointer\"})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:handleEdit,className:\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-blue-600 transition\",children:[/*#__PURE__*/_jsx(User,{className:\"w-6 h-6\"}),\" Edit Details\"]}),isEditMode&&/*#__PURE__*/_jsxs(\"div\",{onClick:handleLogout,className:\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-6 h-6\"}),\" Logout\"]}),!isEditMode&&/*#__PURE__*/_jsxs(\"div\",{onClick:handleLogout,className:\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-6 h-6\"}),\" Logout\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-white p-6 relative\",children:[isEditMode&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-6 right-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdate,className:\"bg-blue-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-blue-700 transition\",children:\"Update Details\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsMenuOpen(true),className:\"text-2xl\",children:/*#__PURE__*/_jsx(Menu,{})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-black\",children:(hospital===null||hospital===void 0?void 0:hospital.hospitalName)||'Hospital Dashboard'}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-slate-500\",children:[\"ID: \",(hospital===null||hospital===void 0?void 0:hospital.hospitalId)||'-']})]}),isEditMode?/*#__PURE__*/// Edit Form\n_jsxs(\"div\",{className:\"max-w-2xl bg-white p-6 rounded-lg shadow-lg mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4\",children:\"Edit Hospital Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"hospitalId\",value:editData.hospitalId,onChange:handleEditChange,placeholder:\"Hospital ID\",className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"input\",{name:\"hospitalName\",value:editData.hospitalName,onChange:handleEditChange,placeholder:\"Hospital Name\",className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"input\",{name:\"contact\",value:editData.contact,onChange:handleEditChange,placeholder:\"Hospital Contact Number\",className:\"w-full p-3 border rounded-lg\",maxLength:\"10\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:editData.email,onChange:handleEditChange,placeholder:\"Hospital Email\",className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"input\",{name:\"specialties\",value:editData.specialties,onChange:handleEditChange,placeholder:\"Specialties (comma-separated)\",className:\"w-full p-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditMode(false),className:\"w-full bg-slate-300 text-slate-900 py-2 rounded-lg font-bold hover:bg-slate-400 transition\",children:\"Cancel\"})]})]}):/*#__PURE__*/// Dashboard View\n_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4\",children:\"Hospital Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-slate-600 space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Name:\"}),\" \",(hospital===null||hospital===void 0?void 0:hospital.hospitalName)||'Not set']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"ID:\"}),\" \",(hospital===null||hospital===void 0?void 0:hospital.hospitalId)||'Not set']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Contact:\"}),\" \",(hospital===null||hospital===void 0?void 0:hospital.contact)||'Not set']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Email:\"}),\" \",(hospital===null||hospital===void 0?void 0:hospital.email)||'Not set']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4\",children:\"Patient Tracker Columns\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[patientTrackerColumns.map(col=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 p-3 border border-slate-200 rounded-lg bg-slate-50\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:col.name,onChange:e=>updateTrackerColumn(col.id,e.target.value),placeholder:\"Column name\",className:\"flex-1 p-2 border border-slate-300 rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeTrackerColumn(col.id),className:\"px-3 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition\",children:\"Remove\"})]},col.id)),/*#__PURE__*/_jsx(\"button\",{onClick:addTrackerColumn,className:\"w-full p-3 border-2 border-dashed border-blue-600 text-blue-600 rounded-lg font-bold hover:bg-blue-50 transition\",children:\"+ Add Column\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4\",children:\"Specialties & Doctors\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[specialties.map(spec=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border border-slate-200 rounded-lg bg-slate-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3 mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-600 uppercase mb-1 block\",children:\"Specialty\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:spec.specialty,onChange:e=>updateSpecialty(spec.id,'specialty',e.target.value),placeholder:\"e.g., Cardiology\",className:\"w-full p-2 border border-slate-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-600 uppercase mb-1 block\",children:\"Corresponding Doctors\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:spec.doctors,onChange:e=>updateSpecialty(spec.id,'doctors',e.target.value),placeholder:\"e.g., Dr. Smith, Dr. Jones\",className:\"w-full p-2 border border-slate-300 rounded-lg\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeSpecialty(spec.id),className:\"w-full px-3 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition\",children:\"Remove Specialty\"})]},spec.id)),/*#__PURE__*/_jsx(\"button\",{onClick:addSpecialty,className:\"w-full p-3 border-2 border-dashed border-green-600 text-green-600 rounded-lg font-bold hover:bg-green-50 transition\",children:\"\\u2022 Add Specialty\"})]})]})]})]})]});}// --- EDIT PROFILE FORM COMPONENT ---\nfunction EditProfileForm(_ref6){let{initialData={},onSave}=_ref6;const initContacts=[];if(initialData.emergencyContact1||initialData.emergencyPhone1){initContacts.push({name:initialData.emergencyContact1||'',phone:initialData.emergencyPhone1||''});}if(initialData.emergencyContact2||initialData.emergencyPhone2){initContacts.push({name:initialData.emergencyContact2||'',phone:initialData.emergencyPhone2||''});}if(initContacts.length===0){initContacts.push({name:'',phone:''});}const[formData,setFormData]=useState({name:initialData.name||'',age:initialData.age||'',bloodGroup:initialData.bloodGroup||'',phone:initialData.phone||'',email:initialData.email||'',moreInfo:initialData.moreInfo||'',profilePic:initialData.profilePic||'',contacts:initContacts});const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleContactChange=(idx,field,value)=>{const newContacts=[...formData.contacts];newContacts[idx]=_objectSpread(_objectSpread({},newContacts[idx]),{},{[field]:value});setFormData(_objectSpread(_objectSpread({},formData),{},{contacts:newContacts}));};const addContact=()=>{setFormData(_objectSpread(_objectSpread({},formData),{},{contacts:[...formData.contacts,{name:'',phone:''}]}));};const removeContact=idx=>{if(formData.contacts.length===1){alert('At least one contact is required');return;}const newContacts=formData.contacts.filter((_,i)=>i!==idx);setFormData(_objectSpread(_objectSpread({},formData),{},{contacts:newContacts}));};const handleFile=e=>{var _e$target$files2;const file=(_e$target$files2=e.target.files)===null||_e$target$files2===void 0?void 0:_e$target$files2[0];if(!file)return;const reader=new FileReader();reader.onload=()=>{setFormData(_objectSpread(_objectSpread({},formData),{},{profilePic:reader.result}));};reader.readAsDataURL(file);};const handleSave=()=>{var _formData$contacts$,_formData$contacts$2,_formData$contacts$3,_formData$contacts$4;if(!formData.name||!formData.phone){alert('Name and phone are required');return;}const flatContacts=_objectSpread(_objectSpread({},formData),{},{emergencyContact1:((_formData$contacts$=formData.contacts[0])===null||_formData$contacts$===void 0?void 0:_formData$contacts$.name)||'',emergencyPhone1:((_formData$contacts$2=formData.contacts[0])===null||_formData$contacts$2===void 0?void 0:_formData$contacts$2.phone)||'',emergencyContact2:((_formData$contacts$3=formData.contacts[1])===null||_formData$contacts$3===void 0?void 0:_formData$contacts$3.name)||'',emergencyPhone2:((_formData$contacts$4=formData.contacts[1])===null||_formData$contacts$4===void 0?void 0:_formData$contacts$4.phone)||''});delete flatContacts.contacts;onSave(flatContacts);};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-slate-50 p-6 rounded-3xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Profile Picture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mt-2\",children:[formData.profilePic?/*#__PURE__*/_jsx(\"img\",{src:formData.profilePic,alt:\"profile\",className:\"w-20 h-20 rounded-full object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 rounded-full bg-slate-200 flex items-center justify-center\",children:\"No Img\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFile})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:formData.name,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Age\"}),/*#__PURE__*/_jsx(\"input\",{name:\"age\",type:\"number\",value:formData.age,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Blood Group\"}),/*#__PURE__*/_jsx(\"input\",{name:\"bloodGroup\",value:formData.bloodGroup,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{name:\"phone\",value:formData.phone,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:formData.email,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"More Information\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"moreInfo\",value:formData.moreInfo,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl\",rows:3})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Emergency Contacts\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 mt-2\",children:[formData.contacts.map((contact,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border border-slate-200 rounded-xl bg-slate-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs font-bold text-slate-600\",children:[\"Contact \",idx+1]}),formData.contacts.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeContact(idx),className:\"text-xs text-red-600 font-bold hover:text-red-700\",children:\"Remove\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.name,onChange:e=>handleContactChange(idx,'name',e.target.value),placeholder:\"Contact Name\",className:\"w-full p-2 border border-slate-300 rounded-lg mb-2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:contact.phone,onChange:e=>handleContactChange(idx,'phone',e.target.value),placeholder:\"Phone Number\",className:\"w-full p-2 border border-slate-300 rounded-lg\"})]},idx)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addContact,className:\"w-full p-2 border-2 border-dashed border-red-600 text-red-600 font-bold rounded-lg hover:bg-red-50 transition\",children:\"+ Add Contact\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-3 mt-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"flex-1 bg-red-600 text-white py-3 rounded-xl font-bold\",children:\"Save\"})})]})});}","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","User","Hospital","LogOut","MapPin","Home","Phone","Shield","Menu","X","Ambulance","ChevronRight","Bed","PhoneIcon","ref","push","set","serverTimestamp","db","jsx","_jsx","jsxs","_jsxs","LifeSyncApp","userRole","setUserRole","localStorage","getItem","isUserRegistered","setIsUserRegistered","currentPage","setCurrentPage","isMenuOpen","setIsMenuOpen","sosStarted","setSosStarted","position","setPosition","watchId","setWatchId","notificationStatus","setNotificationStatus","userData","setUserData","stored","JSON","parse","hospitalData","setHospitalData","handleLogin","role","setItem","handleRegistration","data","stringify","handleLogout","clear","emergencyContacts","contacts","emergencyContact1","emergencyPhone1","name","phone","emergencyContact2","emergencyPhone2","length","concat","slice","calculatedHospitals","setCalculatedHospitals","mapRef","setMapRef","mapLoaded","setMapLoaded","alertsSent","setAlertsSent","isSOSActive","setIsSOSActive","isEditingProfile","setIsEditingProfile","searchNearbyHospitals","userPos","console","log","attempts","waitForGoogle","setInterval","window","google","maps","places","clearInterval","performSearch","error","coords","latitude","longitude","userLocation","LatLng","mapDiv","document","createElement","style","display","body","appendChild","map","Map","center","zoom","service","PlacesService","request","location","radius","type","nearbySearch","results","status","PlacesServiceStatus","OK","isOK","hospitalsWithDist","place","distance","geometry","spherical","computeDistanceBetween","sort","a","b","topHospitals","_ref","idx","_place$opening_hours","dist","estimatedTime","Math","ceil","address","vicinity","lat","lng","toFixed","time","distValue","rating","icuAvail","floor","random","ambulance","toll","placeId","place_id","isOpenNow","opening_hours","open_now","mockHospitals","removeChild","getGoogleApiKey","s","Array","from","scripts","src","includes","url","URL","searchParams","get","e","mapElement","getElementById","mapTypeId","Marker","title","icon","forEach","hospital","label","infowindow","InfoWindow","content","marker","addListener","open","nearestHospitals","notifyAll","pos","selectedHospital","apiKey","mapsLink","hospitalMapsLink","timestamp","Date","toLocaleTimeString","c","i","msg","age","bloodGroup","to","message","inbound","unshift","patient","hospitalCoords","hospitalPhone","callAmbulance","alert","resend","confirm","href","confirmAndCall","ok","reportEmergency","alertsRef","newAlertRef","userName","bloodType","coordinates","createdAt","then","catch","triggerSOS","navigator","geolocation","getCurrentPosition","currentCoords","enableHighAccuracy","startSOS","err","maximumAge","timeout","id","watchPosition","stopSOS","clearWatch","RegistrationForm","onSubmit","onBack","className","children","HospitalRegistrationForm","h","onCancel","HospitalLoginForm","onLogin","onRegister","onClick","div","initial","x","animate","exit","button","whileTap","scale","transition","repeat","Infinity","duration","accuracy","target","rel","_notificationStatus$h","Object","keys","entries","_ref2","k","v","prev","EditProfileForm","initialData","onSave","updated","profilePic","alt","email","moreInfo","opacity","y","delay","width","height","HospitalDashboard","_ref3","formData","setFormData","step","setStep","handleChange","value","onlyDigits","replace","_objectSpread","handleFile","_e$target$files","file","files","reader","FileReader","onload","result","readAsDataURL","handleSubmit","placeholder","onChange","accept","maxLength","_ref4","setData","hospitalId","hospitalName","contact","password","specialties","_ref5","setEmail","setPassword","setHospital","alerts","setAlerts","patientTrackerColumns","setPatientTrackerColumns","setSpecialties","specialty","doctors","selected","setSelected","isEditMode","setIsEditMode","editData","setEditData","handleEdit","handleUpdate","updatedHospital","handleEditChange","addTrackerColumn","newColumn","now","updateTrackerColumn","newName","col","removeTrackerColumn","filter","addSpecialty","newSpec","updateSpecialty","field","spec","removeSpecialty","iv","_ref6","initContacts","handleContactChange","newContacts","addContact","removeContact","_","_e$target$files2","handleSave","_formData$contacts$","_formData$contacts$2","_formData$contacts$3","_formData$contacts$4","flatContacts","rows"],"sources":["C:/Users/PRATHAM/P/LifeSync/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { User, Hospital, LogOut, MapPin, Home, Phone, Shield, Menu, X, Ambulance, ChevronRight, Bed, Phone as PhoneIcon } from 'lucide-react';\r\nimport { ref, push, set, serverTimestamp } from 'firebase/database';\r\nimport { db } from './firebase';\r\n\r\nexport default function LifeSyncApp() {\r\n  // 1. STATE MANAGEMENT (Persistence Simulation)\r\n  const [userRole, setUserRole] = useState(localStorage.getItem('role') || null);\r\n  const [isUserRegistered, setIsUserRegistered] = useState(localStorage.getItem('isRegistered') === 'true');\r\n  const [currentPage, setCurrentPage] = useState(() => {\r\n    // If user is already registered and logged in, go to home page\r\n    if (localStorage.getItem('role') === 'user' && localStorage.getItem('isRegistered') === 'true') {\r\n      return 'home';\r\n    }\r\n    return 'home';\r\n  });\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const [sosStarted, setSosStarted] = useState(false);\r\n  const [position, setPosition] = useState(null);\r\n  const [watchId, setWatchId] = useState(null);\r\n  const [notificationStatus, setNotificationStatus] = useState({});\r\n  const [userData, setUserData] = useState(() => {\r\n    const stored = localStorage.getItem('userData');\r\n    return stored ? JSON.parse(stored) : null;\r\n  });\r\n  const [hospitalData, setHospitalData] = useState(() => {\r\n    const stored = localStorage.getItem('hospitalLoggedIn');\r\n    return stored ? JSON.parse(stored) : null;\r\n  });\r\n\r\n  // 2. LOGIN HANDLER\r\n  const handleLogin = (role) => {\r\n    localStorage.setItem('role', role);\r\n    setUserRole(role);\r\n    \r\n    // Check if user is registered, if not go to registration\r\n    if (role === 'user' && !isUserRegistered) {\r\n      setCurrentPage('register');\r\n    } else if (role === 'hospital') {\r\n      // Show hospital login/register page\r\n      setCurrentPage('hospital-login');\r\n    } else {\r\n      setCurrentPage('home');\r\n    }\r\n  };\r\n\r\n  const handleRegistration = (data) => {\r\n    localStorage.setItem('userData', JSON.stringify(data));\r\n    localStorage.setItem('isRegistered', 'true');\r\n    setUserData(data);\r\n    setIsUserRegistered(true);\r\n    // Auto-login user after registration\r\n    setUserRole('user');\r\n    setCurrentPage('home');\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.clear();\r\n    setUserRole(null);\r\n    setIsUserRegistered(false);\r\n    setUserData(null);\r\n    setCurrentPage('login');\r\n  };\r\n\r\n  // SOS / Notifications\r\n  const emergencyContacts = () => {\r\n    // gather up to 5 contacts from stored userData or defaults\r\n    const contacts = [];\r\n    if (userData?.emergencyContact1 && userData?.emergencyPhone1) contacts.push({ name: userData.emergencyContact1, phone: userData.emergencyPhone1 });\r\n    if (userData?.emergencyContact2 && userData?.emergencyPhone2) contacts.push({ name: userData.emergencyContact2, phone: userData.emergencyPhone2 });\r\n    // fill with defaults if less than 5\r\n    while (contacts.length < 5) {\r\n      contacts.push({ name: `Contact ${contacts.length + 1}`, phone: `+91 90000 0000${contacts.length}` });\r\n    }\r\n    return contacts.slice(0,5);\r\n  };\r\n\r\n  const [calculatedHospitals, setCalculatedHospitals] = useState([]);\r\n  const [mapRef, setMapRef] = useState(null);\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n  const [alertsSent, setAlertsSent] = useState(false);\r\n  const [isSOSActive, setIsSOSActive] = useState(false);\r\n  const [isEditingProfile, setIsEditingProfile] = useState(false);\r\n\r\n  // Search for REAL nearby hospitals using Google Places API\r\n  const searchNearbyHospitals = async (userPos) => {\r\n    if (!userPos) {\r\n      console.log('No position available');\r\n      return;\r\n    }\r\n\r\n    // Wait for Google Maps API to load\r\n    let attempts = 0;\r\n    const waitForGoogle = setInterval(() => {\r\n      attempts++;\r\n      if (window.google && window.google.maps && window.google.maps.places) {\r\n        clearInterval(waitForGoogle);\r\n        performSearch();\r\n      } else if (attempts > 20) {\r\n        clearInterval(waitForGoogle);\r\n        console.error('Google Maps API failed to load');\r\n        setCalculatedHospitals([]);\r\n      }\r\n    }, 100);\r\n\r\n    const performSearch = () => {\r\n      try {\r\n        console.log('Starting hospital search for:', userPos.coords.latitude, userPos.coords.longitude);\r\n        \r\n        const userLocation = new window.google.maps.LatLng(userPos.coords.latitude, userPos.coords.longitude);\r\n        \r\n        // Create a dummy div for PlacesService\r\n        const mapDiv = document.createElement('div');\r\n        mapDiv.style.display = 'none';\r\n        document.body.appendChild(mapDiv);\r\n        \r\n        const map = new window.google.maps.Map(mapDiv, {\r\n          center: userLocation,\r\n          zoom: 15\r\n        });\r\n        \r\n        const service = new window.google.maps.places.PlacesService(map);\r\n        \r\n        const request = {\r\n          location: userLocation,\r\n          radius: 5000, // 5km radius\r\n          type: 'hospital'\r\n        };\r\n\r\n        console.log('Sending PlacesService request:', request);\r\n\r\n        service.nearbySearch(request, (results, status) => {\r\n          console.log('=== Places API Response ===');\r\n          console.log('Status:', status);\r\n          console.log('Results count:', results?.length);\r\n          \r\n          // Log status constants\r\n          console.log('OK Status constant:', window.google.maps.places.PlacesServiceStatus.OK);\r\n          console.log('Status string comparison:', status === 'OK');\r\n          \r\n          // Try both string and constant comparison\r\n          const isOK = status === 'OK' || status === window.google.maps.places.PlacesServiceStatus.OK;\r\n          \r\n          if (isOK && results && results.length > 0) {\r\n            console.log('Hospitals found! Processing...');\r\n            \r\n            // Sort by distance and get top 3\r\n            const hospitalsWithDist = results.map((place) => {\r\n              const distance = window.google.maps.geometry.spherical.computeDistanceBetween(\r\n                userLocation,\r\n                place.geometry.location\r\n              ) / 1000;\r\n              return { place, distance };\r\n            });\r\n\r\n            hospitalsWithDist.sort((a, b) => a.distance - b.distance);\r\n\r\n            const topHospitals = hospitalsWithDist.slice(0, 3).map(({ place, distance: dist }, idx) => {\r\n              const estimatedTime = Math.ceil((dist / 30) * 60);\r\n\r\n              return {\r\n                name: place.name || 'Hospital',\r\n                address: place.vicinity || 'Address not available',\r\n                lat: place.geometry.location.lat(),\r\n                lng: place.geometry.location.lng(),\r\n                dist: `${dist.toFixed(1)}km`,\r\n                time: `${estimatedTime} mins`,\r\n                distValue: dist,\r\n                rating: place.rating || 'N/A',\r\n                icuAvail: Math.floor(Math.random() * 15) + 1,\r\n                ambulance: '+91 98765 1000' + idx,\r\n                toll: '1800-HOSPITAL-' + idx,\r\n                placeId: place.place_id,\r\n                isOpenNow: place.opening_hours?.open_now ? 'Open' : 'Check Hours'\r\n              };\r\n            });\r\n\r\n            setCalculatedHospitals(topHospitals);\r\n            console.log('✅ Found Real Top 3 Hospitals:', topHospitals);\r\n          } else {\r\n            console.error('❌ Places Search failed or no results. Status:', status);\r\n            \r\n            // Show mock hospitals as fallback for testing\r\n            const mockHospitals = [\r\n              {\r\n                name: 'City Medical Center',\r\n                address: 'Main Street, Downtown',\r\n                lat: userPos.coords.latitude + 0.01,\r\n                lng: userPos.coords.longitude + 0.01,\r\n                dist: '1.2km',\r\n                time: '5 mins',\r\n                distValue: 1.2,\r\n                rating: '4.5',\r\n                icuAvail: 8,\r\n                ambulance: '+91 9876510001',\r\n                toll: '1800-CITY-911',\r\n                isOpenNow: 'Open'\r\n              },\r\n              {\r\n                name: 'St. Joseph Hospital',\r\n                address: 'Healthcare Avenue, North',\r\n                lat: userPos.coords.latitude - 0.01,\r\n                lng: userPos.coords.longitude + 0.01,\r\n                dist: '2.4km',\r\n                time: '9 mins',\r\n                distValue: 2.4,\r\n                rating: '4.7',\r\n                icuAvail: 12,\r\n                ambulance: '+91 9876510002',\r\n                toll: '1800-JOSEPH-911',\r\n                isOpenNow: 'Open'\r\n              },\r\n              {\r\n                name: 'Central Health Complex',\r\n                address: 'Wellness Road, Metro',\r\n                lat: userPos.coords.latitude + 0.005,\r\n                lng: userPos.coords.longitude - 0.01,\r\n                dist: '3.1km',\r\n                time: '12 mins',\r\n                distValue: 3.1,\r\n                rating: '4.3',\r\n                icuAvail: 5,\r\n                ambulance: '+91 9876510003',\r\n                toll: '1800-CENTRAL-911',\r\n                isOpenNow: 'Open'\r\n              }\r\n            ];\r\n            \r\n            console.log('Using fallback mock hospitals for testing');\r\n            setCalculatedHospitals(mockHospitals);\r\n          }\r\n          \r\n          // Clean up\r\n          document.body.removeChild(mapDiv);\r\n        });\r\n      } catch (error) {\r\n        console.error('Error in searchNearbyHospitals:', error);\r\n        setCalculatedHospitals([]);\r\n      }\r\n    };\r\n  };\r\n\r\n  // Try to detect the Google Maps API key from the loaded script tag (if present)\r\n  const getGoogleApiKey = () => {\r\n    try {\r\n      for (const s of Array.from(document.scripts)) {\r\n        if (!s.src) continue;\r\n        if (s.src.includes('maps.googleapis.com')) {\r\n          const url = new URL(s.src);\r\n          return url.searchParams.get('key') || '';\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error('Error reading Google API key from scripts', e);\r\n    }\r\n    return '';\r\n  };\r\n\r\n  // Initialize map with proper error checking\r\n  useEffect(() => {\r\n    if (currentPage === 'map' && position && window.google) {\r\n      const mapElement = document.getElementById('map');\r\n      \r\n      if (!mapElement) {\r\n        console.error('Map element not found');\r\n        return;\r\n      }\r\n\r\n      if (mapRef && mapLoaded) {\r\n        return; // Map already initialized\r\n      }\r\n\r\n      try {\r\n        const map = new window.google.maps.Map(mapElement, {\r\n          zoom: 15,\r\n          center: { lat: position.coords.latitude, lng: position.coords.longitude },\r\n          mapTypeId: 'roadmap'\r\n        });\r\n\r\n        // User marker (Blue)\r\n        new window.google.maps.Marker({\r\n          position: { lat: position.coords.latitude, lng: position.coords.longitude },\r\n          map: map,\r\n          title: 'Your Location',\r\n          icon: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'\r\n        });\r\n\r\n        // Hospital markers (Red)\r\n        calculatedHospitals.forEach((hospital, idx) => {\r\n          new window.google.maps.Marker({\r\n            position: { lat: hospital.lat, lng: hospital.lng },\r\n            map: map,\r\n            title: `${idx + 1}. ${hospital.name}`,\r\n            label: `${idx + 1}`,\r\n            icon: 'http://maps.google.com/mapfiles/ms/icons/hospital.png'\r\n          });\r\n\r\n          // Add info window\r\n          const infowindow = new window.google.maps.InfoWindow({\r\n            content: `<div style=\"padding:10px\">\r\n              <strong>${hospital.name}</strong><br/>\r\n              ${hospital.address}<br/>\r\n              Distance: ${hospital.dist}\r\n            </div>`\r\n          });\r\n\r\n          const marker = new window.google.maps.Marker({\r\n            position: { lat: hospital.lat, lng: hospital.lng },\r\n            map: map,\r\n            title: hospital.name\r\n          });\r\n\r\n          marker.addListener('click', () => {\r\n            infowindow.open(map, marker);\r\n          });\r\n        });\r\n\r\n        setMapRef(map);\r\n        setMapLoaded(true);\r\n      } catch (error) {\r\n        console.error('Map initialization error:', error);\r\n      }\r\n    }\r\n  }, [currentPage, position, calculatedHospitals, mapRef, mapLoaded]);\r\n\r\n  const nearestHospitals = calculatedHospitals.length > 0 ? calculatedHospitals : [];\r\n\r\n  const notifyAll = (pos, selectedHospital) => {\r\n    if (!pos) return;\r\n    \r\n    // Build message with location and hospital details\r\n    const coords = `${pos.coords.latitude.toFixed(6)}, ${pos.coords.longitude.toFixed(6)}`;\r\n    const apiKey = getGoogleApiKey();\r\n    const mapsLink = apiKey\r\n      ? `https://www.google.com/maps/search/?api=1&query=${pos.coords.latitude},${pos.coords.longitude}&key=${apiKey}`\r\n      : `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;\r\n    const hospitalMapsLink = selectedHospital && apiKey\r\n      ? `https://www.google.com/maps/search/?api=1&query=${selectedHospital.lat},${selectedHospital.lng}&key=${apiKey}`\r\n      : selectedHospital\r\n        ? `https://www.google.com/maps?q=${selectedHospital.lat},${selectedHospital.lng}`\r\n        : '';\r\n    const timestamp = new Date().toLocaleTimeString();\r\n    \r\n    const contacts = emergencyContacts();\r\n    const status = {};\r\n\r\n    // Send SMS to emergency contacts\r\n    contacts.forEach((c, i) => {\r\n      const msg = `🚨 EMERGENCY ALERT!\\nName: ${userData?.name || 'Unknown'}\\nAge: ${userData?.age || 'N/A'}\\nBlood: ${userData?.bloodGroup || 'N/A'}\\nLocation: ${coords}\\nHospital: ${selectedHospital.name}\\nHospital Location: ${selectedHospital.lat.toFixed(6)},${selectedHospital.lng.toFixed(6)}\\nTime: ${timestamp}\\nMap: ${mapsLink}\\nHospital Map: ${hospitalMapsLink}`;\r\n      \r\n      status[`contact_${i}`] = {\r\n        to: c.phone,\r\n        name: c.name,\r\n        status: 'SMS Sent',\r\n        message: msg,\r\n        timestamp: timestamp,\r\n        location: coords\r\n      };\r\n      \r\n      console.log(`SMS to ${c.name} (${c.phone}):`, msg);\r\n    });\r\n\r\n    // Notify the selected hospital\r\n    const msg = `🚨 INCOMING EMERGENCY!\\nPatient: ${userData?.name || 'Unknown'}\\nAge: ${userData?.age || 'N/A'}\\nBlood: ${userData?.bloodGroup || 'N/A'}\\nLocation: ${coords}\\nPatient Map: ${mapsLink}\\nHospital: ${selectedHospital.name}\\nHospital Location: ${selectedHospital.lat.toFixed(6)},${selectedHospital.lng.toFixed(6)}\\nHospital Map: ${hospitalMapsLink}\\nTime: ${timestamp}`;\r\n    \r\n    status[`hospital`] = {\r\n      to: selectedHospital.ambulance,\r\n      name: selectedHospital.name,\r\n      status: 'Alert Sent',\r\n      message: msg,\r\n      timestamp: timestamp,\r\n      location: coords,\r\n      hospital: selectedHospital.name\r\n    };\r\n    \r\n    console.log(`Alert to ${selectedHospital.name} (${selectedHospital.ambulance}):`, msg);\r\n\r\n    setNotificationStatus(status);\r\n    // Persist hospital alert for hospital dashboard tracing\r\n    try {\r\n      const inbound = JSON.parse(localStorage.getItem('inboundAlerts') || '[]');\r\n      inbound.unshift({\r\n        patient: userData?.name || 'Unknown',\r\n        phone: userData?.phone || '',\r\n        coords,\r\n        mapsLink,\r\n        hospital: selectedHospital.name,\r\n        hospitalCoords: `${selectedHospital.lat},${selectedHospital.lng}`,\r\n        hospitalPhone: selectedHospital.ambulance,\r\n        timestamp\r\n      });\r\n      // keep last 50\r\n      localStorage.setItem('inboundAlerts', JSON.stringify(inbound.slice(0,50)));\r\n    } catch (e) {\r\n      console.error('Error persisting inbound alert', e);\r\n    }\r\n  };\r\n\r\n  // Call ambulance for specific hospital\r\n  const callAmbulance = (hospital) => {\r\n    if (!position) {\r\n      alert('Location not available. Please enable GPS.');\r\n      return;\r\n    }\r\n\r\n    // Prevent accidental duplicate sends\r\n    if (alertsSent) {\r\n      const resend = window.confirm('Alerts were already sent. Do you want to resend and call again?');\r\n      if (!resend) return;\r\n    }\r\n\r\n    // Send SMS and alerts\r\n    notifyAll(position, hospital);\r\n    setAlertsSent(true);\r\n\r\n    // Show confirmation\r\n    alert(`✅ Emergency alert sent to:\\n${hospital.name}\\nYour emergency contacts\\n\\nAmbulance: ${hospital.ambulance}`);\r\n\r\n    // Auto-call ambulance\r\n    window.location.href = `tel:${hospital.ambulance}`;\r\n  };\r\n\r\n  // Confirm before sending alerts and calling ambulance\r\n  const confirmAndCall = (hospital) => {\r\n    const ok = window.confirm(`Send your live location to emergency contacts and call ambulance at ${hospital.name}?`);\r\n    if (!ok) return;\r\n    callAmbulance(hospital);\r\n  };\r\n\r\n  // Firebase Emergency Report Function\r\n  const reportEmergency = (coords) => {\r\n    try {\r\n      // Reference the 'emergencies' collection\r\n      const alertsRef = ref(db, 'emergencies');\r\n      \r\n      // Create a new unique entry\r\n      const newAlertRef = push(alertsRef);\r\n      \r\n      // Populate the entry with patient and GPS data\r\n      set(newAlertRef, {\r\n        userName: userData?.name || 'Unknown Patient',\r\n        bloodType: userData?.bloodGroup || 'N/A',\r\n        age: userData?.age || 'N/A',\r\n        phone: userData?.phone || 'N/A',\r\n        coordinates: {\r\n          lat: coords.lat,\r\n          lng: coords.lng\r\n        },\r\n        emergencyContacts: emergencyContacts().slice(0, 2),\r\n        status: 'pending',\r\n        createdAt: serverTimestamp()\r\n      })\r\n      .then(() => {\r\n        console.log('✅ Emergency reported to Firebase successfully!');\r\n        setIsSOSActive(true);\r\n      })\r\n      .catch((error) => {\r\n        console.error('❌ Firebase sync failed:', error);\r\n        setIsSOSActive(false);\r\n      });\r\n    } catch (error) {\r\n      console.error('Error in reportEmergency:', error);\r\n      setIsSOSActive(false);\r\n    }\r\n  };\r\n\r\n  const triggerSOS = () => {\r\n    setIsSOSActive(true);\r\n\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          const currentCoords = {\r\n            lat: position.coords.latitude,\r\n            lng: position.coords.longitude\r\n          };\r\n          setPosition(position);\r\n          \r\n          // THE TRIGGER: Send to Firebase\r\n          reportEmergency(currentCoords); \r\n        },\r\n        (error) => {\r\n          console.error(\"Geolocation failed:\", error);\r\n          setIsSOSActive(false);\r\n        },\r\n        { enableHighAccuracy: true }\r\n      );\r\n    }\r\n  };\r\n\r\n  const startSOS = async () => {\r\n    if (!('geolocation' in navigator)) {\r\n      alert('Geolocation not supported in this browser');\r\n      return;\r\n    }\r\n\r\n    setSosStarted(true);\r\n    setNotificationStatus({}); // Clear previous notifications\r\n    setAlertsSent(false);\r\n\r\n    // Request high accuracy position first\r\n    navigator.geolocation.getCurrentPosition(\r\n      (pos) => {\r\n        setPosition(pos);\r\n        // Search for REAL nearby hospitals using Google Places API\r\n        searchNearbyHospitals(pos);\r\n        console.log('SOS Activated - Searching nearby hospitals...');\r\n      },\r\n      (err) => {\r\n        console.error('Geolocation error:', err.message);\r\n        alert('Unable to get location. Please enable location services.');\r\n        setSosStarted(false);\r\n      },\r\n      { enableHighAccuracy: true, maximumAge: 0, timeout: 10000 }\r\n    );\r\n\r\n    // Start watching for continuous location updates\r\n    const id = navigator.geolocation.watchPosition(\r\n      (pos) => {\r\n        setPosition(pos);\r\n      },\r\n      (err) => {\r\n        console.error('Watch error:', err.message);\r\n      },\r\n      { enableHighAccuracy: true, maximumAge: 5000, timeout: 10000 }\r\n    );\r\n    setWatchId(id);\r\n  };\r\n\r\n  const stopSOS = () => {\r\n    if (watchId !== null && navigator.geolocation.clearWatch) {\r\n      navigator.geolocation.clearWatch(watchId);\r\n    }\r\n    setWatchId(null);\r\n    setSosStarted(false);\r\n    setNotificationStatus({});\r\n    setAlertsSent(false);\r\n  };\r\n\r\n  // 3. UI COMPONENTS\r\n\r\n  // --- REGISTRATION SCREEN ---\r\n  if (userRole === 'user' && !isUserRegistered && currentPage === 'register') {\r\n    return (\r\n      <RegistrationForm onSubmit={handleRegistration} onBack={() => {\r\n        setUserRole(null);\r\n        localStorage.clear();\r\n      }} />\r\n    );\r\n  }\r\n\r\n  // Hospital Registration Page\r\n  if (currentPage === 'hospital-register') {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-slate-50 p-6 flex items-center justify-center\">\r\n        <div className=\"max-w-lg w-full bg-white p-6 rounded-3xl shadow-xl\">\r\n          <h2 className=\"text-2xl font-black mb-4\">Register Hospital</h2>\r\n          <HospitalRegistrationForm onSubmit={(h) => {\r\n            localStorage.setItem('hospitalData', JSON.stringify(h));\r\n            setHospitalData(h);\r\n            setCurrentPage('hospital-dashboard');\r\n          }} onCancel={() => setCurrentPage('hospital-login')} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Hospital Login Page\r\n  if (currentPage === 'hospital-login') {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-slate-50 p-6 flex items-center justify-center\">\r\n        <div className=\"max-w-md w-full bg-white p-6 rounded-3xl shadow-xl\">\r\n          <h2 className=\"text-2xl font-black mb-4\">Hospital Login</h2>\r\n          <HospitalLoginForm onLogin={(h) => {\r\n            setUserRole('hospital');\r\n            setCurrentPage('hospital-dashboard');\r\n            setHospitalData(h);\r\n            localStorage.setItem('hospitalLoggedIn', JSON.stringify(h));\r\n          }} onRegister={() => setCurrentPage('hospital-register')} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  // --- LOGIN SCREEN ---\r\n  if (!userRole) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-red-50 to-slate-50 flex flex-col items-center justify-center p-6\">\r\n        <div className=\"w-full max-w-md bg-white rounded-3xl shadow-xl p-8 border border-slate-100\">\r\n          <div className=\"flex justify-center mb-6\">\r\n            <div className=\"p-4 bg-red-100 rounded-full\"><Shield className=\"text-red-600 w-10 h-10\" /></div>\r\n          </div>\r\n          <h1 className=\"text-4xl font-black text-center text-slate-800 mb-2\">LifeSync</h1>\r\n          <p className=\"text-center text-slate-500 mb-8\">Emergency Medical Assistance</p>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <button onClick={() => handleLogin('user')} className=\"w-full flex items-center justify-between p-5 bg-gradient-to-r from-red-50 to-red-100 hover:from-red-100 hover:to-red-150 border-2 border-red-200 rounded-2xl transition-all group\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <User className=\"text-red-600 w-6 h-6\" />\r\n                <span className=\"font-bold text-slate-700\">Citizen Portal</span>\r\n              </div>\r\n              <ChevronRight className=\"text-red-600 w-5 h-5\" />\r\n            </button>\r\n\r\n            <button onClick={() => handleLogin('hospital')} className=\"w-full flex items-center justify-between p-5 bg-gradient-to-r from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-150 border-2 border-blue-200 rounded-2xl transition-all group\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <Hospital className=\"text-blue-600 w-6 h-6\" />\r\n                <span className=\"font-bold text-slate-700\">Hospital Staff</span>\r\n              </div>\r\n              <ChevronRight className=\"text-blue-600 w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- CITIZEN PORTAL ---\r\n  if (userRole === 'user') {\r\n    return (\r\n      <div className=\"min-h-screen bg-white text-slate-900 relative overflow-hidden\">\r\n        {/* Sliding Menu Overlay */}\r\n        <AnimatePresence>\r\n          {isMenuOpen && (\r\n            <motion.div initial={{ x: '-100%' }} animate={{ x: 0 }} exit={{ x: '-100%' }} className=\"fixed inset-0 z-50 bg-white w-3/4 shadow-2xl p-6\">\r\n              <div className=\"flex justify-between mb-10\">\r\n                <span className=\"font-black text-red-600 text-xl\">LifeSync</span>\r\n                <X onClick={() => setIsMenuOpen(false)} />\r\n              </div>\r\n              <nav className=\"space-y-6\">\r\n                    <div onClick={() => {setCurrentPage('home'); setIsMenuOpen(false)}} className=\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\"><Home className=\"w-4 h-4\" /> Home</div>\r\n                    \r\n                <div onClick={() => {setCurrentPage('profile'); setIsMenuOpen(false)}} className=\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\"><User /> Profile</div>\r\n                    <div onClick={() => {setCurrentPage('nearest'); setIsMenuOpen(false)}} className=\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\"><Hospital /> Nearest Hospitals</div>\r\n                    <div onClick={() => {setCurrentPage('profile'); setIsEditingProfile(true); setIsMenuOpen(false)}} className=\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\"><User /> Edit Profile</div>\r\n                    <div onClick={() => {setCurrentPage('profile'); setIsEditingProfile(true); setIsMenuOpen(false)}} className=\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\"><Phone /> Emergency Contacts</div>\r\n                \r\n                <div className=\"pt-4 border-t\">\r\n                  <div className=\"text-xs font-bold text-slate-400 uppercase mb-4\">Emergency Services</div>\r\n                  <button onClick={() => { window.location.href = 'tel:112'; setIsMenuOpen(false); }} className=\"w-full flex items-center gap-4 p-3 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition mb-3\">\r\n                    <Phone className=\"w-5 h-5\" /> Call 112\r\n                  </button>\r\n                </div>\r\n                \r\n                <div onClick={handleLogout} className=\"flex items-center gap-4 text-lg font-bold text-red-600 cursor-pointer hover:text-red-700 transition\"><LogOut /> Log Out</div>\r\n              </nav>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        {/* Header */}\r\n        <header className=\"p-6 flex justify-between items-center\">\r\n          <Menu onClick={() => setIsMenuOpen(true)} className=\"w-8 h-8 cursor-pointer\" />\r\n          <div className=\"h-2 w-2 rounded-full bg-green-500 animate-pulse\"></div>\r\n        </header>\r\n\r\n        {/* Dynamic Pages */}\r\n        <main className=\"p-6\">\r\n          {currentPage === 'home' && (\r\n            <div className=\"flex flex-col items-center justify-center py-12\">\r\n              <h2 className=\"text-2xl font-black mb-2\">Ready for Assistance</h2>\r\n              <p className=\"text-slate-400 mb-6\">Press the SOS button to alert contacts and nearby hospitals</p>\r\n\r\n              <motion.button \r\n                whileTap={{ scale: 0.95 }}\r\n                animate={sosStarted ? { scale: [1, 1.06, 1] } : {}}\r\n                transition={{ repeat: sosStarted ? Infinity : 0, duration: 1 }}\r\n                onClick={() => (sosStarted ? stopSOS() : startSOS())}\r\n                className={`w-72 h-72 rounded-full flex flex-col items-center justify-center text-white text-5xl font-black shadow-2xl transition-colors ${sosStarted ? 'bg-orange-500' : 'bg-red-600 shadow-red-200'}`}\r\n              >\r\n                <span className=\"text-3xl\">{sosStarted ? 'ACTIVE' : 'SOS'}</span>\r\n                <span className=\"text-sm font-medium mt-2\">{sosStarted ? 'Sending location...' : 'Tap to alert'}</span>\r\n              </motion.button>\r\n\r\n              {sosStarted && (\r\n                <div className=\"mt-6 w-full max-w-3xl\">\r\n                  {/* Quick-action red buttons for top-3 hospitals */}\r\n                  {nearestHospitals.length > 0 && (\r\n                    <div className=\"flex items-center justify-center gap-4 mb-4\">\r\n                      {nearestHospitals.map((h, idx) => (\r\n                        <button\r\n                          key={`quick-${idx}`}\r\n                          onClick={() => confirmAndCall(h)}\r\n                          className=\"flex flex-col items-center justify-center bg-red-600 hover:bg-red-700 text-white rounded-full w-20 h-20 shadow-lg\"\r\n                          title={`Send location & call ${h.name}`}\r\n                        >\r\n                          <span className=\"text-xs font-bold text-center px-1\">{`#${idx+1}`}</span>\r\n                          <span className=\"text-[10px] mt-1 text-center px-1\">{h.dist}</span>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  <div className=\"bg-white p-4 rounded-2xl shadow mb-4\">\r\n                    <div className=\"flex justify-between items-center flex-wrap gap-2\">\r\n                      <div>\r\n                        <p className=\"text-xs text-slate-500\">Live Location (GPS Precise)</p>\r\n                        <p className=\"font-bold text-sm\">{position ? `${position.coords.latitude.toFixed(6)}, ${position.coords.longitude.toFixed(6)}` : 'Acquiring...'}</p>\r\n                        <p className=\"text-xs text-slate-400\">Accuracy: {position ? `±${position.coords.accuracy.toFixed(0)}m` : 'N/A'}</p>\r\n                      </div>\r\n                      <div className=\"text-right flex gap-2\">\r\n                        {position && (\r\n                          <button onClick={() => setCurrentPage('map')} className=\"text-sm text-blue-600 font-semibold bg-blue-50 px-3 py-1 rounded-lg hover:bg-blue-100\">📍 View Map</button>\r\n                        )}\r\n                        {position && (\r\n                          <a className=\"text-sm text-blue-600 font-semibold bg-blue-50 px-3 py-1 rounded-lg hover:bg-blue-100\" href={`https://www.google.com/maps?q=${position.coords.latitude},${position.coords.longitude}`} target=\"_blank\" rel=\"noreferrer\">🗺️ GMaps</a>\r\n                        )}\r\n                        <button onClick={stopSOS} className=\"text-sm text-white font-bold bg-red-600 px-3 py-1 rounded-lg hover:bg-red-700\">Stop</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-3\">\r\n                    {nearestHospitals.map((h, i) => (\r\n                      <div key={i} className=\"p-4 bg-white rounded-2xl shadow flex flex-col md:flex-row md:justify-between md:items-center\">\r\n                        <div>\r\n                          <h4 className=\"font-bold text-slate-900\">{h.name}</h4>\r\n                          <p className=\"text-sm text-slate-500\">{h.address}</p>\r\n                          {h.lat && h.lng && (\r\n                            <p className=\"text-xs text-slate-400\">Coords: {h.lat.toFixed(6)}, {h.lng.toFixed(6)}</p>\r\n                          )}\r\n                          <p className=\"text-xs text-green-600 font-semibold mt-1\">📍 {h.dist} • {h.time} away</p>\r\n                          <div className=\"flex gap-3 mt-2\">\r\n                            <div className=\"flex items-center gap-2 bg-green-50 p-2 rounded-lg\">\r\n                              <Bed className=\"w-4 h-4 text-green-600\" />\r\n                              <div>\r\n                                <p className=\"text-xs text-slate-500\">ICU Beds</p>\r\n                                <p className=\"font-bold text-green-600\">{h.icuAvail}</p>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 bg-blue-50 p-2 rounded-lg\">\r\n                              <Ambulance className=\"w-4 h-4 text-blue-600\" />\r\n                              <div>\r\n                                <p className=\"text-xs text-slate-500\">Ambulance</p>\r\n                                <p className=\"font-bold text-blue-600 text-sm\">{h.ambulance}</p>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"mt-3 md:mt-0 md:text-right\">\r\n                          <div className=\"text-sm text-slate-600 mb-2\">Status: <span className=\"font-semibold text-green-600\">{notificationStatus.hospital?.status || 'Ready'}</span></div>\r\n                          <button onClick={() => confirmAndCall(h)} className=\"bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-xl font-bold transition-colors\">\r\n                            🚑 Call Ambulance\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  <div className=\"mt-4 bg-white p-3 rounded-2xl shadow\">\r\n                    <h5 className=\"font-bold mb-2\">Notifications</h5>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\r\n                      {Object.keys(notificationStatus).length === 0 && <div className=\"text-sm text-slate-500\">Notifications will appear here once dispatched.</div>}\r\n                      {Object.entries(notificationStatus).map(([k,v]) => (\r\n                        <div key={k} className=\"p-2 bg-slate-50 rounded-lg\">\r\n                          <div className=\"text-xs text-slate-500\">{v.name}</div>\r\n                          <div className=\"font-bold text-sm\">{v.to}</div>\r\n                          <div className=\"text-xs text-slate-600\">{v.status}</div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {currentPage === 'profile' && (\r\n            <div className=\"animate-in slide-in-from-bottom duration-300\">\r\n              <div className=\"flex justify-between items-center mb-6\">\r\n                <div className=\"flex gap-3\">\r\n                  <button onClick={() => { setCurrentPage('home'); setIsEditingProfile(false); }} className=\"text-slate-400 font-bold py-2 px-4 bg-slate-100 hover:bg-slate-200 rounded-lg transition\">← Back</button>\r\n                </div>\r\n                <div className=\"flex gap-3\">\r\n                  <button onClick={() => { setIsEditingProfile(prev => !prev); }} className=\"text-white font-bold py-2 px-4 bg-red-600 hover:bg-red-700 rounded-lg transition\">{isEditingProfile ? 'Cancel Edit' : 'Edit Profile'}</button>\r\n                </div>\r\n              </div>\r\n\r\n              <h2 className=\"text-3xl font-black mb-6\">Your Profile</h2>\r\n\r\n              {isEditingProfile ? (\r\n                <EditProfileForm\r\n                  initialData={userData}\r\n                  onSave={(updated) => {\r\n                    localStorage.setItem('userData', JSON.stringify(updated));\r\n                    setUserData(updated);\r\n                    setIsEditingProfile(false);\r\n                    alert('Profile updated');\r\n                  }}\r\n                />\r\n              ) : (\r\n                <div className=\"bg-slate-50 p-6 rounded-3xl space-y-4\">\r\n                  <div className=\"bg-white p-4 rounded-2xl flex items-center gap-4\">\r\n                    {userData?.profilePic ? (\r\n                      <img src={userData.profilePic} alt=\"profile\" className=\"w-20 h-20 rounded-full object-cover\" />\r\n                    ) : (\r\n                      <div className=\"w-20 h-20 rounded-full bg-slate-200 flex items-center justify-center\">No Img</div>\r\n                    )}\r\n                    <div>\r\n                      <label className=\"text-xs font-bold text-slate-400 uppercase\">Name</label>\r\n                      <p className=\"font-bold text-lg\">{userData?.name || 'Not set'}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div className=\"bg-white p-4 rounded-2xl\">\r\n                      <label className=\"text-xs font-bold text-slate-400 uppercase\">Age</label>\r\n                      <p className=\"font-bold\">{userData?.age || 'N/A'}</p>\r\n                    </div>\r\n                    <div className=\"bg-white p-4 rounded-2xl\">\r\n                      <label className=\"text-xs font-bold text-slate-400 uppercase\">Blood Group</label>\r\n                      <p className=\"font-bold text-red-600 text-lg\">{userData?.bloodGroup || 'N/A'}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"bg-white p-4 rounded-2xl\">\r\n                    <label className=\"text-xs font-bold text-slate-400 uppercase\">Phone</label>\r\n                    <p className=\"font-bold\">{userData?.phone || 'Not set'}</p>\r\n                  </div>\r\n\r\n                  <div className=\"bg-white p-4 rounded-2xl\">\r\n                    <label className=\"text-xs font-bold text-slate-400 uppercase\">Email</label>\r\n                    <p className=\"font-bold\">{userData?.email || 'Not set'}</p>\r\n                  </div>\r\n\r\n                  <div className=\"bg-white p-4 rounded-2xl\">\r\n                    <label className=\"text-xs font-bold text-slate-400 uppercase\">More Information</label>\r\n                    <p className=\"text-sm text-slate-600\">{userData?.moreInfo || 'No additional info'}</p>\r\n                  </div>\r\n\r\n                  <div className=\"pt-4 border-t\">\r\n                    <label className=\"text-xs font-bold text-slate-400 uppercase\">Emergency Contacts</label>\r\n                    <div className=\"space-y-2 mt-3\">\r\n                      {userData?.emergencyContact1 && (\r\n                        <div className=\"text-sm font-medium bg-white p-3 rounded-lg border border-slate-200\">\r\n                          <p className=\"font-bold\">{userData.emergencyContact1}</p>\r\n                          <p className=\"text-slate-600\">{userData.emergencyPhone1}</p>\r\n                        </div>\r\n                      )}\r\n                      {userData?.emergencyContact2 && (\r\n                        <div className=\"text-sm font-medium bg-white p-3 rounded-lg border border-slate-200\">\r\n                          <p className=\"font-bold\">{userData.emergencyContact2}</p>\r\n                          <p className=\"text-slate-600\">{userData.emergencyPhone2}</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <button onClick={() => {\r\n                    handleLogout();\r\n                  }} className=\"w-full mt-6 bg-red-100 hover:bg-red-200 text-red-600 font-bold py-3 rounded-xl transition-colors\">\r\n                    Logout\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {currentPage === 'nearest' && (\r\n            <div>\r\n              <div className=\"flex justify-between items-center mb-6\">\r\n                <button onClick={() => setCurrentPage('home')} className=\"text-slate-400 font-bold\">← Back</button>\r\n                <h2 className=\"text-3xl font-black\">Nearby Hospitals</h2>\r\n                <button onClick={() => {\r\n                  if (!position) {\r\n                    navigator.geolocation.getCurrentPosition(\r\n                      (pos) => {\r\n                        setPosition(pos);\r\n                        searchNearbyHospitals(pos);\r\n                      },\r\n                      () => alert('Please enable location'),\r\n                      { enableHighAccuracy: true, maximumAge: 0, timeout: 10000 }\r\n                    );\r\n                  } else {\r\n                    searchNearbyHospitals(position);\r\n                  }\r\n                }} className=\"text-sm text-white font-bold bg-blue-600 px-3 py-1 rounded-lg hover:bg-blue-700\">🔄 Refresh</button>\r\n              </div>\r\n              \r\n              {position && (\r\n                <div className=\"bg-white p-4 rounded-2xl shadow mb-4\">\r\n                  <div className=\"flex justify-between items-center flex-wrap gap-2\">\r\n                    <div>\r\n                      <p className=\"text-xs text-slate-500\">Your Current Location (GPS Precise)</p>\r\n                      <p className=\"font-bold text-sm\">{position.coords.latitude.toFixed(6)}, {position.coords.longitude.toFixed(6)}</p>\r\n                      <p className=\"text-xs text-slate-400\">Accuracy: ±{position.coords.accuracy.toFixed(0)}m</p>\r\n                    </div>\r\n                    <div className=\"text-right flex gap-2\">\r\n                      {position && (\r\n                        <a className=\"text-sm text-blue-600 font-semibold bg-blue-50 px-3 py-1 rounded-lg hover:bg-blue-100\" href={`https://www.google.com/maps?q=${position.coords.latitude},${position.coords.longitude}`} target=\"_blank\" rel=\"noreferrer\">🗺️ View on GMaps</a>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {!position && <p className=\"text-slate-500 mb-4 text-center py-4 bg-slate-50 rounded-xl\">📍 Click Refresh button to enable location and find nearby hospitals</p>}\r\n              \r\n              {calculatedHospitals.length === 0 && position && <p className=\"text-slate-500 mb-4 text-center py-4 bg-slate-50 rounded-xl\">Searching for hospitals...</p>}\r\n              \r\n              <div className=\"space-y-4\">\r\n                {(calculatedHospitals.length > 0 ? calculatedHospitals : []).map((h, i) => (\r\n                  <motion.div \r\n                    key={i} \r\n                    initial={{ opacity: 0, y: 10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: i * 0.1 }}\r\n                    className=\"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm hover:shadow-md transition-all\"\r\n                  >\r\n                    <div className=\"flex justify-between items-start mb-3\">\r\n                      <div>\r\n                        <h4 className=\"font-bold text-slate-900 text-lg\">#{i + 1} {h.name}</h4>\r\n                        <p className=\"text-sm text-slate-500 flex items-center gap-1 mt-1\">\r\n                          <MapPin className=\"w-4 h-4\" /> {h.address}\r\n                        </p>\r\n                        {h.lat && h.lng && (\r\n                          <p className=\"text-xs text-slate-400 mt-1\">📍 Coords: {h.lat.toFixed(6)}, {h.lng.toFixed(6)}</p>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-blue-600 font-black text-lg\">{h.time}</p>\r\n                        <p className=\"text-xs text-slate-400\">{h.dist}</p>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"grid grid-cols-2 gap-3 pt-3 border-t\">\r\n                      <div className=\"flex items-center gap-2 bg-green-50 p-2 rounded-lg\">\r\n                        <Bed className=\"w-4 h-4 text-green-600\" />\r\n                        <div>\r\n                          <p className=\"text-xs text-slate-500\">ICU Beds</p>\r\n                          <p className=\"font-bold text-green-600\">{h.icuAvail}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2 bg-blue-50 p-2 rounded-lg\">\r\n                        <Ambulance className=\"w-4 h-4 text-blue-600\" />\r\n                        <div>\r\n                          <p className=\"text-xs text-slate-500\">Ambulance</p>\r\n                          <p className=\"font-bold text-blue-600 text-sm\">{h.ambulance}</p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-3 pt-3 border-t space-y-2\">\r\n                      <div className=\"flex items-center gap-2 text-slate-700\">\r\n                        <PhoneIcon className=\"w-4 h-4 text-orange-600\" />\r\n                        <span className=\"text-sm font-semibold\">{h.ambulance}</span>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2 text-slate-700\">\r\n                        <Phone className=\"w-4 h-4 text-purple-600\" />\r\n                        <span className=\"text-sm font-semibold\">{h.toll}</span>\r\n                      </div>\r\n                      {h.rating && (\r\n                        <div className=\"flex items-center gap-2 text-slate-700\">\r\n                          <span className=\"text-sm\">⭐ Rating: {h.rating}</span>\r\n                        </div>\r\n                      )}\r\n                      {h.isOpenNow && (\r\n                        <div className=\"flex items-center gap-2 text-green-600\">\r\n                          <span className=\"text-sm font-semibold\">✅ {h.isOpenNow}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-2 mt-3\">\r\n                      <a href={`https://www.google.com/maps?q=${h.lat},${h.lng}`} target=\"_blank\" rel=\"noreferrer\" className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-xl font-bold text-sm transition-colors\">\r\n                        📍 View Hospital Map\r\n                      </a>\r\n                      <button onClick={() => confirmAndCall(h)} className=\"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-xl font-bold text-sm transition-colors\">\r\n                        🚑 Call Ambulance\r\n                      </button>\r\n                    </div>\r\n                  </motion.div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- MAP PAGE ---\r\n  if (userRole === 'user' && currentPage === 'map') {\r\n    return (\r\n      <div className=\"min-h-screen bg-white\">\r\n        <div className=\"flex justify-between items-center p-4 bg-red-600 text-white\">\r\n          <h2 className=\"font-bold\">Live Location & Hospitals</h2>\r\n          <button onClick={() => setCurrentPage('home')} className=\"text-white hover:text-gray-200\">✕</button>\r\n        </div>\r\n        <div id=\"map\" style={{ width: '100%', height: 'calc(100vh - 60px)' }} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- HOSPITAL STAFF VIEW ---\r\n  if (userRole === 'hospital') {\r\n    return (\r\n      <HospitalDashboard />\r\n    );\r\n  }\r\n}\r\n\r\n// --- REGISTRATION FORM COMPONENT ---\r\nfunction RegistrationForm({ onSubmit, onBack }) {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    age: '',\r\n    bloodGroup: '',\r\n    phone: '',\r\n    email: '',\r\n    emergencyContact1: '',\r\n    emergencyPhone1: '',\r\n    emergencyContact2: '',\r\n    emergencyPhone2: '',\r\n    profilePic: '',\r\n  });\r\n\r\n  const [step, setStep] = useState(1);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    // For phone fields, only allow digits (0-9)\r\n    if (name === 'phone' || name === 'emergencyPhone1' || name === 'emergencyPhone2') {\r\n      const onlyDigits = value.replace(/\\D/g, '');\r\n      setFormData({ ...formData, [name]: onlyDigits });\r\n    } else {\r\n      setFormData({ ...formData, [name]: value });\r\n    }\r\n  };\r\n\r\n  const handleFile = (e) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      setFormData(prev => ({ ...prev, profilePic: reader.result }));\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (!formData.name || !formData.age || !formData.bloodGroup || !formData.phone) {\r\n      alert('Please fill all required fields');\r\n      return;\r\n    }\r\n    if (!formData.emergencyContact1 || !formData.emergencyPhone1) {\r\n      alert('Please enter at least one emergency contact with phone number');\r\n      return;\r\n    }\r\n    // Check if Contact 1 name and phone are the same\r\n    if (formData.emergencyContact1 === formData.emergencyPhone1) {\r\n      alert('Emergency contact name and phone number cannot be the same');\r\n      return;\r\n    }\r\n    // Check if Contact 2 is filled and validate it's different from Contact 1\r\n    if (formData.emergencyContact2 || formData.emergencyPhone2) {\r\n      if (formData.emergencyContact1 === formData.emergencyContact2) {\r\n        alert('Emergency contact names must be different');\r\n        return;\r\n      }\r\n      if (formData.emergencyPhone1 === formData.emergencyPhone2) {\r\n        alert('Emergency contact phone numbers must be different');\r\n        return;\r\n      }\r\n      // Check if Contact 2 name and phone are the same\r\n      if (formData.emergencyContact2 === formData.emergencyPhone2) {\r\n        alert('Emergency contact name and phone number cannot be the same');\r\n        return;\r\n      }\r\n    }\r\n    onSubmit(formData);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-red-50 to-slate-50 p-6\">\r\n      <div className=\"max-w-md mx-auto mt-10\">\r\n        <button onClick={onBack} className=\"mb-6 text-slate-600 font-bold flex items-center gap-2\">\r\n          ← Back\r\n        </button>\r\n\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 border border-slate-100\">\r\n          <h1 className=\"text-3xl font-black text-slate-800 mb-2\">Register Urself</h1>\r\n          <p className=\"text-slate-500 mb-6\">Complete your profile for emergency assistance</p>\r\n\r\n          {/* Progress Bar */}\r\n          <div className=\"flex gap-2 mb-8\">\r\n            {[1, 2].map((s) => (\r\n              <div key={s} className={`h-1 flex-1 rounded-full transition-all ${s <= step ? 'bg-red-600' : 'bg-slate-200'}`} />\r\n            ))}\r\n          </div>\r\n\r\n          {step === 1 && (\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Full Name *</label>\r\n                <input type=\"text\" name=\"name\" placeholder=\"Your full name\" value={formData.name} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Profile Picture</label>\r\n                <div className=\"flex items-center gap-4 mt-2\">\r\n                  {formData.profilePic ? (\r\n                    <img src={formData.profilePic} alt=\"profile\" className=\"w-16 h-16 rounded-full object-cover\" />\r\n                  ) : (\r\n                    <div className=\"w-16 h-16 rounded-full bg-slate-200 flex items-center justify-center\">No Img</div>\r\n                  )}\r\n                  <input type=\"file\" accept=\"image/*\" onChange={handleFile} />\r\n                </div>\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"text-xs font-bold text-slate-500 uppercase\">Age *</label>\r\n                  <input type=\"number\" name=\"age\" placeholder=\"Age\" value={formData.age} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-xs font-bold text-slate-500 uppercase\">Blood Group *</label>\r\n                  <select name=\"bloodGroup\" value={formData.bloodGroup} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\">\r\n                    <option value=\"\">Select</option>\r\n                    <option>O+</option>\r\n                    <option>O-</option>\r\n                    <option>A+</option>\r\n                    <option>A-</option>\r\n                    <option>B+</option>\r\n                    <option>B-</option>\r\n                    <option>AB+</option>\r\n                    <option>AB-</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Phone *</label>\r\n                <div className=\"flex items-center mt-1 border border-slate-200 rounded-xl focus-within:border-red-600 bg-white\">\r\n                  <span className=\"px-3 py-3 font-bold text-slate-600\">+91</span>\r\n                  <input type=\"tel\" name=\"phone\" placeholder=\"XXXXX XXXXX\" value={formData.phone} onChange={handleChange} maxLength=\"10\" className=\"flex-1 p-3 border-none outline-none\" />\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Email</label>\r\n                <input type=\"email\" name=\"email\" placeholder=\"your@email.com\" value={formData.email} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n              </div>\r\n              <button onClick={() => {\r\n                if (!formData.name || !formData.age || !formData.bloodGroup || !formData.phone) {\r\n                  alert('Please fill all required fields: Name, Age, Blood Group, and Phone');\r\n                  return;\r\n                }\r\n                if (formData.phone.length < 10) {\r\n                  alert('Phone number must be 10 digits');\r\n                  return;\r\n                }\r\n                setStep(2);\r\n              }} className=\"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl mt-6\">\r\n                Next\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {step === 2 && (\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-bold text-slate-800 mb-4\">Emergency Contacts</h3>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Contact 1 Name *</label>\r\n                <input type=\"text\" name=\"emergencyContact1\" placeholder=\"Contact name\" value={formData.emergencyContact1} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Contact 1 Phone *</label>\r\n                <div className=\"flex items-center mt-1 border border-slate-200 rounded-xl focus-within:border-red-600 bg-white\">\r\n                  <span className=\"px-3 py-3 font-bold text-slate-600\">+91</span>\r\n                  <input type=\"tel\" name=\"emergencyPhone1\" placeholder=\"XXXXX XXXXX\" value={formData.emergencyPhone1} onChange={handleChange} maxLength=\"10\" className=\"flex-1 p-3 border-none outline-none\" />\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Contact 2 Name</label>\r\n                <input type=\"text\" name=\"emergencyContact2\" placeholder=\"Contact name\" value={formData.emergencyContact2} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Contact 2 Phone</label>\r\n                <div className=\"flex items-center mt-1 border border-slate-200 rounded-xl focus-within:border-red-600 bg-white\">\r\n                  <span className=\"px-3 py-3 font-bold text-slate-600\">+91</span>\r\n                  <input type=\"tel\" name=\"emergencyPhone2\" placeholder=\"XXXXX XXXXX\" value={formData.emergencyPhone2} onChange={handleChange} maxLength=\"10\" className=\"flex-1 p-3 border-none outline-none\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"flex gap-3 mt-6\">\r\n                <button onClick={() => setStep(1)} className=\"flex-1 bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-3 rounded-xl\">\r\n                  Back\r\n                </button>\r\n                <button onClick={handleSubmit} className=\"flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl\">\r\n                  Complete\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// --- HOSPITAL REGISTRATION FORM ---\r\nfunction HospitalRegistrationForm({ onSubmit, onCancel }) {\r\n  const [data, setData] = useState({\r\n    hospitalId: '', hospitalName: '', contact: '', email: '', password: '', specialties: ''\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    // For contact, only allow digits (0-9)\r\n    if (name === 'contact') {\r\n      const onlyDigits = value.replace(/\\D/g, '');\r\n      setData({ ...data, [name]: onlyDigits });\r\n    } else {\r\n      setData({ ...data, [name]: value });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (!data.hospitalId || !data.hospitalName || !data.email || !data.password) {\r\n      alert('Please fill Hospital ID, hospital name, email and password');\r\n      return;\r\n    }\r\n    onSubmit(data);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"space-y-3\">\r\n        <input name=\"hospitalId\" value={data.hospitalId} onChange={handleChange} placeholder=\"Hospital ID\" className=\"w-full p-3 border rounded-lg\" />\r\n        <input name=\"hospitalName\" value={data.hospitalName} onChange={handleChange} placeholder=\"Hospital Name\" className=\"w-full p-3 border rounded-lg\" />\r\n        <input name=\"contact\" value={data.contact} onChange={handleChange} placeholder=\"Hospital Contact Number\" maxLength=\"10\" className=\"w-full p-3 border rounded-lg\" />\r\n        <input name=\"email\" value={data.email} onChange={handleChange} placeholder=\"Hospital Email\" className=\"w-full p-3 border rounded-lg\" />\r\n        <input name=\"password\" type=\"password\" value={data.password} onChange={handleChange} placeholder=\"Password\" className=\"w-full p-3 border rounded-lg\" />\r\n        <input name=\"specialties\" value={data.specialties} onChange={handleChange} placeholder=\"Specialties (comma separated)\" className=\"w-full p-3 border rounded-lg\" />\r\n        <div className=\"flex gap-2 mt-3\">\r\n          <button onClick={handleSubmit} className=\"flex-1 bg-blue-600 text-white py-2 rounded-lg\">Register</button>\r\n          <button onClick={onCancel} className=\"flex-1 bg-slate-200 py-2 rounded-lg\">Cancel</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// --- HOSPITAL LOGIN FORM ---\r\nfunction HospitalLoginForm({ onLogin, onRegister }) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const handleSubmit = () => {\r\n    const stored = JSON.parse(localStorage.getItem('hospitalData') || 'null');\r\n    if (!stored) {\r\n      alert('No hospital registered. Please register first.');\r\n      return;\r\n    }\r\n    if (email === stored.email && password === stored.password) {\r\n      onLogin(stored);\r\n    } else {\r\n      alert('Invalid credentials');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <input value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Hospital ID\" className=\"w-full p-3 border rounded-lg mb-2\" />\r\n      <input value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Password\" type=\"password\" className=\"w-full p-3 border rounded-lg mb-2\" />\r\n      <div className=\"flex gap-2\">\r\n        <button onClick={handleSubmit} className=\"flex-1 bg-blue-600 text-white py-2 rounded-lg\">Login</button>\r\n        <button onClick={onRegister} className=\"flex-1 bg-slate-200 py-2 rounded-lg\">Register</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// --- HOSPITAL DASHBOARD ---\r\nfunction HospitalDashboard() {\r\n  const [hospital, setHospital] = useState(() => {\r\n    return JSON.parse(localStorage.getItem('hospitalLoggedIn') || 'null');\r\n  });\r\n  const [alerts, setAlerts] = useState(() => {\r\n    return JSON.parse(localStorage.getItem('inboundAlerts') || '[]');\r\n  });\r\n  const [patientTrackerColumns, setPatientTrackerColumns] = useState(() => {\r\n    const stored = localStorage.getItem('patientTrackerColumns');\r\n    return stored ? JSON.parse(stored) : [{ id: 1, name: 'Patient Name' }, { id: 2, name: 'Status' }];\r\n  });\r\n  const [specialties, setSpecialties] = useState(() => {\r\n    const stored = localStorage.getItem('hospitalSpecialties');\r\n    return stored ? JSON.parse(stored) : [{ id: 1, specialty: '', doctors: '' }];\r\n  });\r\n  const [selected, setSelected] = useState(null);\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const [isEditMode, setIsEditMode] = useState(false);\r\n  const [editData, setEditData] = useState({\r\n    hospitalId: hospital?.hospitalId || '',\r\n    hospitalName: hospital?.hospitalName || '',\r\n    contact: hospital?.contact || '',\r\n    email: hospital?.email || '',\r\n    specialties: hospital?.specialties || ''\r\n  });\r\n\r\n  const handleLogout = () => {\r\n    localStorage.clear();\r\n    window.location.href = '/';\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setIsEditMode(true);\r\n    setIsMenuOpen(false);\r\n  };\r\n\r\n  const handleUpdate = () => {\r\n    if (!editData.hospitalId || !editData.hospitalName || !editData.email) {\r\n      alert('Please fill Hospital ID, Hospital Name and Email');\r\n      return;\r\n    }\r\n    const updatedHospital = { ...hospital, ...editData };\r\n    localStorage.setItem('hospitalLoggedIn', JSON.stringify(updatedHospital));\r\n    localStorage.setItem('hospitalData', JSON.stringify(updatedHospital));\r\n    setHospital(updatedHospital);\r\n    setIsEditMode(false);\r\n    alert('Hospital details updated successfully!');\r\n  };\r\n\r\n  const handleEditChange = (e) => {\r\n    const { name, value } = e.target;\r\n    // For contact, only allow digits (0-9)\r\n    if (name === 'contact') {\r\n      const onlyDigits = value.replace(/\\D/g, '');\r\n      setEditData({ ...editData, [name]: onlyDigits });\r\n    } else {\r\n      setEditData({ ...editData, [name]: value });\r\n    }\r\n  };\r\n\r\n  // Patient Tracker Column Functions\r\n  const addTrackerColumn = () => {\r\n    const newColumn = { id: Date.now(), name: `Column ${patientTrackerColumns.length + 1}` };\r\n    const updated = [...patientTrackerColumns, newColumn];\r\n    setPatientTrackerColumns(updated);\r\n    localStorage.setItem('patientTrackerColumns', JSON.stringify(updated));\r\n  };\r\n\r\n  const updateTrackerColumn = (id, newName) => {\r\n    const updated = patientTrackerColumns.map(col => col.id === id ? { ...col, name: newName } : col);\r\n    setPatientTrackerColumns(updated);\r\n    localStorage.setItem('patientTrackerColumns', JSON.stringify(updated));\r\n  };\r\n\r\n  const removeTrackerColumn = (id) => {\r\n    if (patientTrackerColumns.length === 1) {\r\n      alert('At least one column is required');\r\n      return;\r\n    }\r\n    const updated = patientTrackerColumns.filter(col => col.id !== id);\r\n    setPatientTrackerColumns(updated);\r\n    localStorage.setItem('patientTrackerColumns', JSON.stringify(updated));\r\n  };\r\n\r\n  // Specialties Functions\r\n  const addSpecialty = () => {\r\n    const newSpec = { id: Date.now(), specialty: '', doctors: '' };\r\n    const updated = [...specialties, newSpec];\r\n    setSpecialties(updated);\r\n    localStorage.setItem('hospitalSpecialties', JSON.stringify(updated));\r\n  };\r\n\r\n  const updateSpecialty = (id, field, value) => {\r\n    const updated = specialties.map(spec => spec.id === id ? { ...spec, [field]: value } : spec);\r\n    setSpecialties(updated);\r\n    localStorage.setItem('hospitalSpecialties', JSON.stringify(updated));\r\n  };\r\n\r\n  const removeSpecialty = (id) => {\r\n    if (specialties.length === 1) {\r\n      alert('At least one specialty is required');\r\n      return;\r\n    }\r\n    const updated = specialties.filter(spec => spec.id !== id);\r\n    setSpecialties(updated);\r\n    localStorage.setItem('hospitalSpecialties', JSON.stringify(updated));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const iv = setInterval(() => {\r\n      setAlerts(JSON.parse(localStorage.getItem('inboundAlerts') || '[]'));\r\n    }, 2000);\r\n    return () => clearInterval(iv);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white text-slate-900 relative overflow-hidden\">\r\n      {/* Sliding Menu Overlay */}\r\n      <AnimatePresence>\r\n        {isMenuOpen && (\r\n          <motion.div initial={{ x: '-100%' }} animate={{ x: 0 }} exit={{ x: '-100%' }} className=\"fixed inset-0 z-50 bg-white w-3/4 shadow-2xl p-6\">\r\n            <div className=\"flex justify-between mb-10\">\r\n              <span className=\"font-black text-blue-600 text-xl\">Hospital Menu</span>\r\n              <X onClick={() => setIsMenuOpen(false)} className=\"cursor-pointer\" />\r\n            </div>\r\n            <nav className=\"space-y-6\">\r\n              <div onClick={handleEdit} className=\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-blue-600 transition\"><User className=\"w-6 h-6\" /> Edit Details</div>\r\n              {isEditMode && <div onClick={handleLogout} className=\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\"><LogOut className=\"w-6 h-6\" /> Logout</div>}\r\n              {!isEditMode && <div onClick={handleLogout} className=\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\"><LogOut className=\"w-6 h-6\" /> Logout</div>}\r\n            </nav>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Header with Menu Button */}\r\n      <div className=\"min-h-screen bg-white p-6 relative\">\r\n        {/* Update Details Button - Corner */}\r\n        {isEditMode && (\r\n          <div className=\"absolute top-6 right-6\">\r\n            <button onClick={handleUpdate} className=\"bg-blue-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-blue-700 transition\">\r\n              Update Details\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <button onClick={() => setIsMenuOpen(true)} className=\"text-2xl\"><Menu /></button>\r\n          <h2 className=\"text-xl font-black\">{hospital?.hospitalName || 'Hospital Dashboard'}</h2>\r\n          <div className=\"text-sm text-slate-500\">ID: {hospital?.hospitalId || '-'}</div>\r\n        </div>\r\n\r\n        {isEditMode ? (\r\n          // Edit Form\r\n          <div className=\"max-w-2xl bg-white p-6 rounded-lg shadow-lg mb-6\">\r\n            <h3 className=\"text-2xl font-bold mb-4\">Edit Hospital Details</h3>\r\n            <div className=\"space-y-4\">\r\n              <input name=\"hospitalId\" value={editData.hospitalId} onChange={handleEditChange} placeholder=\"Hospital ID\" className=\"w-full p-3 border rounded-lg\" />\r\n              <input name=\"hospitalName\" value={editData.hospitalName} onChange={handleEditChange} placeholder=\"Hospital Name\" className=\"w-full p-3 border rounded-lg\" />\r\n              <input name=\"contact\" value={editData.contact} onChange={handleEditChange} placeholder=\"Hospital Contact Number\" className=\"w-full p-3 border rounded-lg\" maxLength=\"10\" />\r\n              <input name=\"email\" value={editData.email} onChange={handleEditChange} placeholder=\"Hospital Email\" className=\"w-full p-3 border rounded-lg\" />\r\n              <input name=\"specialties\" value={editData.specialties} onChange={handleEditChange} placeholder=\"Specialties (comma-separated)\" className=\"w-full p-3 border rounded-lg\" />\r\n              <button onClick={() => setIsEditMode(false)} className=\"w-full bg-slate-300 text-slate-900 py-2 rounded-lg font-bold hover:bg-slate-400 transition\">\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          // Dashboard View\r\n          <div className=\"space-y-6\">\r\n            {/* Hospital Details */}\r\n            <div className=\"bg-white p-6 rounded-lg shadow-lg\">\r\n              <h3 className=\"text-2xl font-bold mb-4\">Hospital Details</h3>\r\n              <div className=\"text-slate-600 space-y-3\">\r\n                <div><span className=\"font-semibold\">Name:</span> {hospital?.hospitalName || 'Not set'}</div>\r\n                <div><span className=\"font-semibold\">ID:</span> {hospital?.hospitalId || 'Not set'}</div>\r\n                <div><span className=\"font-semibold\">Contact:</span> {hospital?.contact || 'Not set'}</div>\r\n                <div><span className=\"font-semibold\">Email:</span> {hospital?.email || 'Not set'}</div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Patient Tracker Columns */}\r\n            <div className=\"bg-white p-6 rounded-lg shadow-lg\">\r\n              <h3 className=\"text-2xl font-bold mb-4\">Patient Tracker Columns</h3>\r\n              <div className=\"space-y-3\">\r\n                {patientTrackerColumns.map((col) => (\r\n                  <div key={col.id} className=\"flex items-center gap-3 p-3 border border-slate-200 rounded-lg bg-slate-50\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={col.name}\r\n                      onChange={(e) => updateTrackerColumn(col.id, e.target.value)}\r\n                      placeholder=\"Column name\"\r\n                      className=\"flex-1 p-2 border border-slate-300 rounded-lg\"\r\n                    />\r\n                    <button\r\n                      onClick={() => removeTrackerColumn(col.id)}\r\n                      className=\"px-3 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition\"\r\n                    >\r\n                      Remove\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n                <button\r\n                  onClick={addTrackerColumn}\r\n                  className=\"w-full p-3 border-2 border-dashed border-blue-600 text-blue-600 rounded-lg font-bold hover:bg-blue-50 transition\"\r\n                >\r\n                  + Add Column\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Specialties with Doctors */}\r\n            <div className=\"bg-white p-6 rounded-lg shadow-lg\">\r\n              <h3 className=\"text-2xl font-bold mb-4\">Specialties & Doctors</h3>\r\n              <div className=\"space-y-3\">\r\n                {specialties.map((spec) => (\r\n                  <div key={spec.id} className=\"p-4 border border-slate-200 rounded-lg bg-slate-50\">\r\n                    <div className=\"grid grid-cols-2 gap-3 mb-3\">\r\n                      <div>\r\n                        <label className=\"text-xs font-bold text-slate-600 uppercase mb-1 block\">Specialty</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={spec.specialty}\r\n                          onChange={(e) => updateSpecialty(spec.id, 'specialty', e.target.value)}\r\n                          placeholder=\"e.g., Cardiology\"\r\n                          className=\"w-full p-2 border border-slate-300 rounded-lg\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"text-xs font-bold text-slate-600 uppercase mb-1 block\">Corresponding Doctors</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={spec.doctors}\r\n                          onChange={(e) => updateSpecialty(spec.id, 'doctors', e.target.value)}\r\n                          placeholder=\"e.g., Dr. Smith, Dr. Jones\"\r\n                          className=\"w-full p-2 border border-slate-300 rounded-lg\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <button\r\n                      onClick={() => removeSpecialty(spec.id)}\r\n                      className=\"w-full px-3 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition\"\r\n                    >\r\n                      Remove Specialty\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n                <button\r\n                  onClick={addSpecialty}\r\n                  className=\"w-full p-3 border-2 border-dashed border-green-600 text-green-600 rounded-lg font-bold hover:bg-green-50 transition\"\r\n                >\r\n                  • Add Specialty\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// --- EDIT PROFILE FORM COMPONENT ---\r\nfunction EditProfileForm({ initialData = {}, onSave }) {\r\n  const initContacts = [];\r\n  if (initialData.emergencyContact1 || initialData.emergencyPhone1) {\r\n    initContacts.push({ name: initialData.emergencyContact1 || '', phone: initialData.emergencyPhone1 || '' });\r\n  }\r\n  if (initialData.emergencyContact2 || initialData.emergencyPhone2) {\r\n    initContacts.push({ name: initialData.emergencyContact2 || '', phone: initialData.emergencyPhone2 || '' });\r\n  }\r\n  if (initContacts.length === 0) {\r\n    initContacts.push({ name: '', phone: '' });\r\n  }\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: initialData.name || '',\r\n    age: initialData.age || '',\r\n    bloodGroup: initialData.bloodGroup || '',\r\n    phone: initialData.phone || '',\r\n    email: initialData.email || '',\r\n    moreInfo: initialData.moreInfo || '',\r\n    profilePic: initialData.profilePic || '',\r\n    contacts: initContacts\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleContactChange = (idx, field, value) => {\r\n    const newContacts = [...formData.contacts];\r\n    newContacts[idx] = { ...newContacts[idx], [field]: value };\r\n    setFormData({ ...formData, contacts: newContacts });\r\n  };\r\n\r\n  const addContact = () => {\r\n    setFormData({ ...formData, contacts: [...formData.contacts, { name: '', phone: '' }] });\r\n  };\r\n\r\n  const removeContact = (idx) => {\r\n    if (formData.contacts.length === 1) {\r\n      alert('At least one contact is required');\r\n      return;\r\n    }\r\n    const newContacts = formData.contacts.filter((_, i) => i !== idx);\r\n    setFormData({ ...formData, contacts: newContacts });\r\n  };\r\n\r\n  const handleFile = (e) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      setFormData({ ...formData, profilePic: reader.result });\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    if (!formData.name || !formData.phone) {\r\n      alert('Name and phone are required');\r\n      return;\r\n    }\r\n    const flatContacts = {\r\n      ...formData,\r\n      emergencyContact1: formData.contacts[0]?.name || '',\r\n      emergencyPhone1: formData.contacts[0]?.phone || '',\r\n      emergencyContact2: formData.contacts[1]?.name || '',\r\n      emergencyPhone2: formData.contacts[1]?.phone || ''\r\n    };\r\n    delete flatContacts.contacts;\r\n    onSave(flatContacts);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-slate-50 p-6 rounded-3xl\">\r\n      <div className=\"grid grid-cols-1 gap-4\">\r\n        <div>\r\n          <label className=\"text-xs font-bold text-slate-500 uppercase\">Profile Picture</label>\r\n          <div className=\"flex items-center gap-4 mt-2\">\r\n            {formData.profilePic ? (\r\n              <img src={formData.profilePic} alt=\"profile\" className=\"w-20 h-20 rounded-full object-cover\" />\r\n            ) : (\r\n              <div className=\"w-20 h-20 rounded-full bg-slate-200 flex items-center justify-center\">No Img</div>\r\n            )}\r\n            <input type=\"file\" accept=\"image/*\" onChange={handleFile} />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"text-xs font-bold text-slate-500 uppercase\">Full Name</label>\r\n          <input name=\"name\" value={formData.name} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl\" />\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"text-xs font-bold text-slate-500 uppercase\">Age</label>\r\n            <input name=\"age\" type=\"number\" value={formData.age} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-xs font-bold text-slate-500 uppercase\">Blood Group</label>\r\n            <input name=\"bloodGroup\" value={formData.bloodGroup} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"text-xs font-bold text-slate-500 uppercase\">Phone</label>\r\n          <input name=\"phone\" value={formData.phone} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl\" />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"text-xs font-bold text-slate-500 uppercase\">Email</label>\r\n          <input name=\"email\" value={formData.email} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl\" />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"text-xs font-bold text-slate-500 uppercase\">More Information</label>\r\n          <textarea name=\"moreInfo\" value={formData.moreInfo} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl\" rows={3} />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"text-xs font-bold text-slate-500 uppercase\">Emergency Contacts</label>\r\n          <div className=\"space-y-3 mt-2\">\r\n            {formData.contacts.map((contact, idx) => (\r\n              <div key={idx} className=\"p-3 border border-slate-200 rounded-xl bg-slate-50\">\r\n                <div className=\"flex justify-between items-center mb-2\">\r\n                  <span className=\"text-xs font-bold text-slate-600\">Contact {idx + 1}</span>\r\n                  {formData.contacts.length > 1 && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => removeContact(idx)}\r\n                      className=\"text-xs text-red-600 font-bold hover:text-red-700\"\r\n                    >\r\n                      Remove\r\n                    </button>\r\n                  )}\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  value={contact.name}\r\n                  onChange={(e) => handleContactChange(idx, 'name', e.target.value)}\r\n                  placeholder=\"Contact Name\"\r\n                  className=\"w-full p-2 border border-slate-300 rounded-lg mb-2\"\r\n                />\r\n                <input\r\n                  type=\"tel\"\r\n                  value={contact.phone}\r\n                  onChange={(e) => handleContactChange(idx, 'phone', e.target.value)}\r\n                  placeholder=\"Phone Number\"\r\n                  className=\"w-full p-2 border border-slate-300 rounded-lg\"\r\n                />\r\n              </div>\r\n            ))}\r\n            <button\r\n              type=\"button\"\r\n              onClick={addContact}\r\n              className=\"w-full p-2 border-2 border-dashed border-red-600 text-red-600 font-bold rounded-lg hover:bg-red-50 transition\"\r\n            >\r\n              + Add Contact\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex gap-3 mt-4\">\r\n          <button onClick={handleSave} className=\"flex-1 bg-red-600 text-white py-3 rounded-xl font-bold\">Save</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}